<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <title>Player — YAT?STATS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html,body{margin:0;background:#0b0b0b;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    main{max-width:980px;margin:0 auto;padding:14px 12px 46px}
    .hero{background:#000;border-top:1px solid #1f2530;border-bottom:1px solid #1f2530;display:grid;grid-template-columns:1fr auto;align-items:center;padding:8px 10px}
    .pname{font:900 22px/1 "Anton";letter-spacing:.02em}
    .psub{font:300 13px/1 "Oswald";color:#9aa1ab}
    .right{display:flex;align-items:center;gap:6px}
    .hbtn{width:38px;height:38px;border:0;background:transparent;border-radius:10px;display:grid;place-items:center;cursor:pointer}
    .hbtn:hover{background:rgba(255,255,255,.08)} .hbtn svg{width:21px;height:21px;color:#fff}
  </style>
</head>
<body>
  <div id="headerMount"></div>

  <div class="hero">
    <div>
      <div class="pname" id="pName">PLAYER NAME</div>
      <div class="psub" id="pSub">CLASS OF —</div>
    </div>
    <div class="right">
      <button id="iconSearch" class="hbtn" aria-label="Search"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M11 4a7 7 0 1 1 0 14 7 7 0 0 1 0-14zm9.7 15.3-3.4-3.4a9 9 0 1 0-1.4 1.4l3.4 3.4a1 1 0 0 0 1.4-1.4z"/></svg></button>
      <button id="iconFilter" class="hbtn" aria-label="Filters"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M3 5h18l-6.5 7.5V20l-5-2v-5.5L3 5z"/></svg></button>
      <button id="iconReset" class="hbtn" aria-label="Reset"><svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 5V2L8 6l4 4V7a5 5 0 1 1-5 5H5a7 7 0 1 0 7-7z"/></svg></button>
    </div>
  </div>

  <main><div id="profileRoot"></div></main>

  <script>
  async function injectAndRun(url, mount){
    const html = await (await fetch(url,{cache:'no-cache'})).text();
    const tmp = document.createElement('div'); tmp.innerHTML = html;
    tmp.querySelectorAll('style,link[rel="stylesheet"]').forEach(el=>document.head.appendChild(el.cloneNode(true)));
    tmp.querySelectorAll('script').forEach(s=>s.remove());
    mount.append(...tmp.childNodes);
    const sTmp=document.createElement('div'); sTmp.innerHTML=html;
    sTmp.querySelectorAll('script').forEach(s=>{const ns=document.createElement('script'); if(s.src){ns.src=s.src;} else {ns.textContent=s.textContent;} document.body.appendChild(ns);});
  }
  (async function(){
    await injectAndRun('header.html', document.getElementById('headerMount'));
    await injectAndRun('cards.html', document.body);

    const id=new URLSearchParams(location.search).get('id');
    const p=(window.YAT?.players||[]).find(x=>String(x.id)===String(id));
    if(p){ document.getElementById('pName').textContent=p.name||'—'; document.getElementById('pSub').textContent=p.graduatingClass?`CLASS OF ${p.graduatingClass}`:''; window.YAT?.renderProfile?.(document.getElementById('profileRoot'),p); }
    else{ document.getElementById('profileRoot').innerHTML='<p style="color:#e11d48">Player not found.</p>'; }
  })();
  </script>
</body>
</html>