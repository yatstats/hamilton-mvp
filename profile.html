<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>YAT?STATS — Player Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#000; --fg:#fff; --muted:#cbd5e1; --ring:#1f2530; --edge:14px; --heroH:86px; --crumbH:26px; }
    [data-theme="light"]{ --bg:#fff; --fg:#000; --muted:#374151; --ring:#d1d5db; }
    html,body{margin:0;background:var(--bg);color:var(--fg)}
    #headerMount{position:relative;z-index:60}
    /* HERO (profile variant) */
    .hero{position:sticky;top:calc(54px + 78px);z-index:50;background:var(--bg);border-bottom:1px solid var(--ring)}
    .hero-top{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:8px;padding:8px var(--edge) 4px}
    .hbtn{width:38px;height:38px;border-radius:10px;border:1px solid var(--ring);background:transparent;display:grid;place-items:center;color:var(--fg);cursor:pointer}
    .hbtn:hover{background:rgba(255,255,255,.08)}
    .name-wrap{display:flex;justify-content:flex-end;align-items:flex-end;gap:14px}
    .pname{font:400 30px/1 "Bebas Neue",sans-serif;text-align:right}
    .pclass{font:300 12px/1 "Oswald",sans-serif;color:var(--muted);text-align:right}
    .hs-photo{height:100px;width:auto;border-radius:10px;object-fit:cover;border:1px solid var(--ring)}
    .crumbs{height:var(--crumbH);display:flex;align-items:center;padding:0 var(--edge);color:var(--muted);font:300 12px/1 "Oswald",sans-serif}
    /* Main content placeholder + bottom links */
    main{padding:16px var(--edge) 90px}
    .profile-shell{max-width:1100px;margin:0 auto}
    .bottom-links{position:fixed;left:0;right:0;bottom:0;height:46px;background:var(--bg);border-top:1px solid var(--ring);display:flex;gap:14px;align-items:center;justify-content:center}
    .bl{font:700 16px/1 "Bebas Neue";color:var(--fg);text-decoration:none}
    .bl .thin{font:400 12px/1 "Oswald";color:var(--muted);margin-right:4px}
  </style>
</head>
<body>

  <div id="headerMount"></div>

  <!-- HERO (profile variant) -->
  <section class="hero" aria-label="Profile hero">
    <div class="hero-top">
      <button class="hbtn" id="heroSearchProfile" aria-label="Search other players">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"/></svg>
      </button>
      <div></div>
      <div class="name-wrap">
        <div>
          <div id="playerName" class="pname">PLAYER NAME</div>
          <div id="playerClass" class="pclass">CLASS OF 20XX</div>
        </div>
        <img id="hsPhoto" class="hs-photo" alt="HS photo"/>
      </div>
    </div>
    <div class="crumbs" id="breadcrumbs">Home ▸ Player Profile</div>
  </section>

  <main>
    <div class="profile-shell">
      <div id="profileMount"></div>
    </div>
  </main>

  <nav class="bottom-links" aria-label="Profile sections">
    <a class="bl" href="#bio"><span class="thin">BIO</span> |</a>
    <a class="bl" href="#news"><span class="thin">NEWS</span> |</a>
    <a class="bl" href="#stats"><span class="thin">STATS</span> |</a>
    <a class="bl" href="#social"><span class="thin">SOCIAL</span> |</a>
    <a class="bl" href="#nil"><span class="thin">NIL SCORE</span> |</a>
    <a class="bl" href="#video"><span class="thin">VIDEO</span> |</a>
    <a class="bl" href="#pics"><span class="thin">PICS</span></a>
  </nav>

  <script>
    async function mountPartial(url, mountSelector){
      const html = await fetch(url, {cache:'no-cache'}).then(r=>r.text());
      const mount = typeof mountSelector==='string' ? document.querySelector(mountSelector) : mountSelector;
      mount.innerHTML = html;
      mount.querySelectorAll('script').forEach(old=>{
        const s=document.createElement('script');
        if(old.type) s.type=old.type;
        s.textContent = old.textContent;
        document.body.appendChild(s);
        old.remove();
      });
    }

    (async function(){
      await mountPartial('header.html','#headerMount');
      await mountPartial('cards.html', document.body.appendChild(document.createElement('div')));

      // open left drawer from hero search
      document.getElementById('heroSearchProfile')?.addEventListener('click', ()=> document.getElementById('openLeft')?.click());

      const params=new URLSearchParams(location.search);
      const id=params.get('id');
      const players = window.YAT?.players || [];
      const p = players.find(x=> (x.id||'')===id) || players[0];

      if(p){
        document.getElementById('playerName').textContent = p.name || '—';
        const gc = p.graduatingClass ? `CLASS OF ${p.graduatingClass}` : '';
        document.getElementById('playerClass').textContent = gc;
        const hs = p.highSchoolImg || p.frontImg || '';
        const imgEl = document.getElementById('hsPhoto');
        imgEl.src = hs; imgEl.alt = p.name ? `${p.name} — HS` : 'HS photo';

        // quick profile panel using cards engine helper
        window.YAT?.renderProfile?.(document.getElementById('profileMount'), p);
        document.getElementById('breadcrumbs').textContent = `Home ▸ ${p.name || 'Player Profile'}`;
      } else {
        document.getElementById('profileMount').innerHTML = `<div style="color:#e11d48">Player not found.</div>`;
      }
    })();
  </script>
</body>
</html>