<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Player — Hamilton</title>
<link rel="stylesheet" href="styles.css"/>
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet"/>
</head>
<body>

<header class="header">
  <div class="container topbar">
    <div class="left-icons">
      <button class="icon-btn" id="hamburger"><i class="ri-menu-line"></i></button>
      <button class="icon-btn" id="account"><i class="ri-user-3-line"></i></button>
      <button class="icon-btn" id="theme"><i class="ri-moon-line"></i></button>
    </div>
    <nav class="topnav hide-sm">
      <span class="nav-pair"><span class="thin">WHERE THEY</span><span class="bold">YAT?</span></span>
      <span class="nav-pair"><span class="thin">ACTIVE ALUMNI</span><span class="bold">NEWS</span></span>
      <span class="nav-pair"><span class="thin">NEXT-LEVEL</span><span class="bold">ALL-TIME LIST</span></span>
      <span class="nav-pair"><span class="thin">NIL & YAT-A-BOY</span><span class="bold">MARKETPLACE</span></span>
      <span class="nav-pair"><span class="thin">THE</span><span class="bold">CURRENT TEAM</span></span>
      <span class="nav-pair"><span class="thin">PCD ACTION</span><span class="bold">PARTNER PROGRAM</span></span>
      <span class="nav-pair"><span class="thin"></span><span class="bold">FAQ’S</span></span>
    </nav>
    <div class="wordmark">YAT?STATS</div>
  </div>

  <div class="hr"></div>

  <div class="container schoolrow">
    <img src="assets/img/hamilton-logo.png" alt="Hamilton H" onerror="this.style.opacity=.2">
    <div class="schooltext">
      <div class="small">CHANDLER, AZ</div>
      <div class="big1">HAMILTON HIGH SCHOOL</div>
      <div class="big2">ACTIVE ALUMNI</div>
    </div>
  </div>

  <div class="hr"></div>

  <!-- PROFILE hero: name right-justified next to HS photo (small) -->
  <section class="hero">
    <div class="container hero-grid">
      <div class="icon-row">
        <!-- only SEARCH in hero for profile pages -->
        <button class="icon-btn" id="openSearch"><i class="ri-search-line"></i></button>
      </div>
      <div style="display:flex;align-items:center;gap:14px;margin-left:auto">
        <div style="text-align:right">
          <div id="heroName" style="font:400 28px Bebas Neue, sans-serif;letter-spacing:.02em">PLAYER NAME</div>
          <div id="heroClass" class="small" style="text-align:right">CLASS OF 20XX</div>
        </div>
        <img id="heroHS" src="assets/img/placeholder.jpg" alt="" style="height:100px;width:auto;border-radius:6px;object-fit:cover">
      </div>
    </div>
    <div class="container">
      <div class="crumbs"><span class="subname">HAMILTON</span> ▸ <span id="crumbName">PLAYER NAME</span></div>
    </div>
  </section>
</header>

<div class="drawer-mask"></div>
<aside class="drawer" id="drawerLeft">
  <h3>PLAYER PROFILE SEARCH</h3>
  <div class="pad">
    <input id="playerSearch" placeholder="Type to search…" style="width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:rgba(255,255,255,.06);color:var(--ink)"/>
    <div id="liveResults"></div>
  </div>
  <div class="pad"><h3>Navigation</h3>
    <div style="display:flex;flex-direction:column;gap:12px">
      <a href="index.html"><span class="thin">WHERE THEY</span> <span class="bold">YAT?</span></a>
      <!-- same list as others -->
    </div>
  </div>
  <button class="icon-btn close-btn" onclick="document.body.classList.remove('drawer-left-open')"><i class="ri-close-line"></i></button>
</aside>

<main class="container" style="padding:16px 14px 80px">
  <section id="profileBody" class="card" style="border-radius:22px">
    <div class="card-inner">
      <div class="bg" id="profileBG" style="background-image:url('assets/img/placeholder.jpg')"></div>
      <div class="shade"></div>
      <div class="cap">
        <div class="name" id="profName">Player Name</div>
        <div id="profTeam" style="font-size:12px;opacity:.9"></div>
        <div class="chips" id="profChips"></div>
      </div>
    </div>
  </section>
</main>

<footer class="footer-tabs">
  <div class="container tabs">
    <a href="#">BIO</a><a href="#">NEWS</a><a href="#">STATS</a><a href="#">SOCIAL</a><a href="#">NIL SCORE</a><a href="#">VIDEO</a><a href="#">PICS</a>
  </div>
</footer>

<script>
const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vSB4q8nvjYfftVeWKkFNz42uDDWSuDXikimMa-a25WQk_XX-imZbiUd8q5Cj94rjZJjaabw5DGMvJFd/pub?gid=82179728&single=true&output=csv";
const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
$('#hamburger').onclick=()=>document.body.classList.add('drawer-left-open');
$('#openSearch') .onclick=()=>document.body.classList.add('drawer-left-open');
$('.drawer-mask').onclick=()=>document.body.classList.remove('drawer-left-open');

async function loadCSV(url){
  const txt=await fetch(url,{cache:'no-store'}).then(r=>r.text());
  const rows=txt.trim().split(/\r?\n/).map(r=>r.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/).map(c=>c.replace(/^"|"$/g,'')));
  const header=rows.shift(); const idx=n=>header.indexOf(n);
  return rows.map(r=>({
    id:r[idx('tbc_id')]||r[idx('id')], slug:r[idx('slug')],
    display_name:r[idx('display_name')], first:r[idx('first')], last:r[idx('last')],
    grad_class:r[idx('grad_class')], letter_years:r[idx('letter_years')],
    status:r[idx('status')], level:r[idx('level')], team:r[idx('team')], org:r[idx('org')],
    front_img:r[idx('front_img')], hs_img:r[idx('hs_img')]
  }));
}
function qparam(k){ return new URLSearchParams(location.search).get(k); }
function rosterChips(p){
  const yrs=String(p.letter_years||'').split(',').map(s=>s.trim()).filter(Boolean).map(y=>y.slice(-2));
  return `<span class="chip">${p.status||''}</span>` + yrs.map(y=>`<span class="chip">${y}</span>`).join('');
}
function setHero(p){
  const name=p.display_name||(p.first&&p.last?`${p.first} ${p.last}`:'');
  $('#heroName').textContent=name;
  $('#heroClass').textContent=`CLASS OF ${p.grad_class||''}`;
  $('#heroHS').src=p.hs_img||'assets/img/placeholder.jpg';
  $('#crumbName').textContent=name;
  // big background section
  $('#profName').textContent=name;
  $('#profTeam').textContent=p.team||'';
  $('#profChips').innerHTML=rosterChips(p);
  $('#profileBG').style.backgroundImage=`url('${p.front_img||'assets/img/placeholder.jpg'}')`;
}
(async()=>{
  const players=await loadCSV(CSV_URL);
  const id=qparam('id');
  const p=players.find(x=>(String(x.id)===id)||x.slug===id) || players[0];
  setHero(p);
  // live search
  const liveBox=$('#liveResults'); const input=$('#playerSearch');
  const makeHit=p=>{
    const el=document.createElement('div'); el.className='live-hit';
    el.innerHTML=`<img src="${p.hs_img||p.front_img||'assets/img/placeholder.jpg'}"><div><div style="font-weight:700">${p.display_name||p.first+' '+p.last}</div><div style="opacity:.7;font-size:.92em">${p.level||''} • Class of ${p.grad_class||''}</div></div>`;
    el.onclick=()=>location.href=`profile.html?id=${encodeURIComponent(p.id||p.slug||'')}`;
    return el;
  };
  input?.addEventListener('input', (e)=>{
    const q=(e.target.value||'').toLowerCase().trim();
    if(!q){ liveBox.innerHTML=''; return; }
    const hits=players.filter(p=>( (p.display_name||(`${p.first} ${p.last}`)||'').toLowerCase().includes(q))).slice(0,25);
    liveBox.innerHTML=''; hits.forEach(x=>liveBox.appendChild(makeHit(x)));
  });
})();
</script>
</body>
</html>