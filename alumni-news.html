<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Alumni News • Hamilton YATSTATS</title>
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400&family=Bebas+Neue&display=swap" rel="stylesheet">
<script type="module">
  // Full Firebase initialization
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, onAuthStateChanged, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  window.firebaseAuth = { getAuth, onAuthStateChanged, signInWithCustomToken, signInAnonymously };
  try {
    const firebaseConfig = JSON.parse(window.__firebase_config || '{}');
    const app = initializeApp(firebaseConfig);
    window.auth = getAuth(app);
    onAuthStateChanged(window.auth, user => { document.dispatchEvent(new CustomEvent('authStateChanged', { detail: { user } })); });
  } catch (e) { console.error("Firebase initialization error:", e); }
</script>

<style>
/* Base styles from your main page */
:root{
  --bg: #0c0c0c; --fg: #f2f2f2; --muted: #c4c4c4; --ink: #e8e8e8; --line: rgba(255, 255, 255, 0.08);
  --card-bg: #171717; --header-bg: #000; --drawer-bg: rgba(10, 10, 10, .65);
  --hamSmall:13px; --hamBig:20px; --hamBigger:24px; --containerPad: 16px; --footerH: clamp(56px, 8vh, 77px);
}
body.light-theme {
  --bg: #f4f4f4; --fg: #121212; --muted: #555; --ink: #222; --line: rgba(0, 0, 0, 0.1);
  --card-bg: #ffffff; --header-bg: #ffffff; --drawer-bg: rgba(255, 255, 255, .65);
}
@font-face{font-family:'Indigo';src:url('assets/fonts/Indigo.otf') format('opentype');font-weight:400; font-style:normal; font-display:swap;}
*{box-sizing:border-box} html,body{margin:0}
body{background:var(--bg); color:var(--fg); font-family:Oswald,system-ui,sans-serif; transition: background-color 0.3s, color 0.3s;}
body.drawer-open { overflow: hidden; }
a{color:inherit;text-decoration:none}
.container{max-width:1400px;margin:0 auto;padding:0 var(--containerPad)}
.header{position:sticky;top:0;z-index:50;background:var(--header-bg);transition: background-color 0.3s;}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
.left-icons{display:flex;align-items:center;gap:8px}
.icon-btn{background:none;border:none;color:var(--fg);opacity:.92;display:inline-flex;align-items:center;justify-content:center;padding:0;margin:0 2px; cursor: pointer;}
.icon-btn i{font-size:20px}
.topnav{display:flex;gap:18px;align-items:center}
@media (max-width:1200px){ .topnav{display:none !important} }
.hr-y{border-top:1px solid var(--line)}
.schoolrow{display:flex;align-items:center;gap:10px;padding:6px var(--containerPad)}
.hero{padding:2px 0}
.hero-grid{display:flex;align-items:center;justify-content:space-between;gap:16px}
.hero-right{display:flex;gap:10px}
.main{padding:8px 0 calc(var(--footerH) + 12px)}
.site-footer{position:fixed;left:0;right:0;bottom:0;height:var(--footerH);background:var(--bg);border-top:1px solid var(--line);z-index:40}
.site-footer a { display: block; height: 100%; width: 100%; }
.site-footer img{ height:100%; width:100%; object-fit:contain; }
.drawer-mask{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:opacity .2s;z-index:60}
.drawer{position:fixed;top:0;bottom:0;width:min(360px,82vw);background:var(--drawer-bg);backdrop-filter:blur(4px);color:var(--ink);transform:translateX(-110%);transition:transform .25s, background-color 0.3s;z-index:70}
.drawer-right{right:0;left:auto;transform:translateX(110%); display: flex; flex-direction: column; height: 100%;}
.drawer h3{margin:18px 16px 8px;}
.drawer .close-btn { position: absolute; top: 12px; right: 12px; }
body.drawer-left-open .drawer-mask,body.drawer-right-open .drawer-mask{opacity:1;pointer-events:auto}
body.drawer-left-open #drawerLeft{transform:translateX(0)}
body.drawer-right-open #drawerFilters, body.drawer-right-open #drawerAccount {transform:translateX(0)}
.drawer-content { flex-grow: 1; overflow-y: auto; padding: 0 16px;}
.drawer-footer { flex-shrink: 0; padding: 12px 16px; border-top: 1px solid var(--line); }
.filter-group { border-bottom: 1px solid var(--line); }
.filter-title { padding: 14px 0; cursor: pointer; font-weight: 700; list-style: none; display: flex; justify-content: space-between; align-items: center; }
details[open] > .filter-title::after { transform: rotate(90deg); }
.filter-options { padding: 4px 0 16px 0; }
.filter-options label { display: block; margin-bottom: 8px; }
.select-all-label { font-weight: bold; border-bottom: 1px solid var(--line); padding-bottom: 8px !important; margin-bottom: 12px !important;}

/* Styles for Fox Sports Cards */
.news-grid { display: grid; gap: 20px; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); }
.news-card {
  position: relative; border-radius: 8px; overflow: hidden; color: #fff;
  display: flex; flex-direction: column; justify-content: flex-end; min-height: 450px;
}
.card-background {
  position: absolute; inset: 0; z-index: 1; background-size: cover; background-position: center;
  transition: transform 0.4s ease-out;
}
.news-card:hover .card-background { transform: scale(1.05); }
.card-scrim {
  position: absolute; inset: 0; z-index: 2;
  background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.6) 40%, rgba(0,0,0,0) 100%);
}
.card-content { position: relative; z-index: 3; padding: 16px; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); }
.news-card-title { font-family: "Bebas Neue", sans-serif; font-size: 26px; line-height: 1.1; margin: 0 0 8px 0; }
.news-card-meta { font-size: 12px; color: var(--muted); margin-bottom: 12px; opacity: 0.9; }
.share-buttons { display: flex; gap: 12px; margin-top: 16px; }
.share-buttons i { font-size: 22px; }
</style>
</head>
<body>

<div id="splashScreen" style="display: none;"></div>
<header class="header"> </header>
<div class="drawer-mask"></div>
<aside class="drawer" id="drawerLeft"> </aside>
<aside class="drawer drawer-right" id="drawerAccount"> </aside>

<aside class="drawer drawer-right" id="drawerFilters">
  <button class="icon-btn close-btn"><i class="ri-close-line"></i></button>
  <h3>FILTERS</h3>
  <div class="drawer-content" id="filters">
    <details class="filter-group">
      <summary class="filter-title">By Status</summary>
      <div class="filter-options" id="filterStatus">
        <label class="select-all-label"><input type="checkbox" class="select-all"> Select All</label>
        <label><input type="checkbox" value="ACTIVE"> ACTIVE</label>
        <label><input type="checkbox" value="INJURED"> INJURED</label>
      </div>
    </details>
    <details class="filter-group">
      <summary class="filter-title">By Level</summary>
      <div class="filter-options" id="filterLevels">
         </div>
    </details>
    <details class="filter-group">
      <summary class="filter-title">By Graduating Class</summary>
      <div class="filter-options" id="filterGradClass">
         </div>
    </details>
  </div>
  <div class="drawer-footer">
    <button id="filtersReset" class="icon-btn" style="padding:10px 14px;border:1px solid var(--line);border-radius:12px"><i class="ri-restart-line"></i>&nbsp;Reset Filters</button>
  </div>
</aside>

<main class="main container">
  <div class="news-grid" id="newsGrid">
    <p style="color: var(--muted); grid-column: 1 / -1;">Generating the latest news...</p>
  </div>
</main>

<footer class="site-footer"> </footer>

<script type="module">
  const $ = (sel) => document.querySelector(sel);
  const $$ = (sel) => document.querySelectorAll(sel);
  
  // --- NEWS GENERATION LOGIC ---
  const players = [
    { name: "Cody Bellinger", team: "New York Yankees", level: "MLB", type: "hitter", grad_class: "2012", status: "ACTIVE" },
    { name: "Dom Hamel", team: "New York Mets", level: "MLB", type: "pitcher", grad_class: "2017", status: "ACTIVE" },
    { name: "Patrick Murphy", team: "KT Wiz Suwon", level: "INTERNATIONAL", type: "pitcher", grad_class: "2013", status: "ACTIVE" },
    { name: "Gavin Turley", team: "Stockton Ports", level: "LOW-A", type: "hitter", grad_class: "2022", status: "ACTIVE" },
    { name: "Roch Cholowsky", team: "UCLA", level: "NCAA-D1", type: "hitter", grad_class: "2023", status: "ACTIVE" },
    { name: "Boston Kellner", team: "Texas A&M", level: "NCAA-D1", type: "hitter", grad_class: "2023", status: "ACTIVE" },
    { name: "Shane Anderson", team: "Georgia Gwinnett College", level: "NAIA", type: "hitter", grad_class: "2020", status: "ACTIVE" },
    { name: "AJ Diaz", team: "College of Southern Nevada", level: "JUCO", type: "hitter", grad_class: "2023", status: "INJURED" }
    // Add more players as needed to ensure a good variety of news
  ];
  const templates = {
    hitter: [
      { h: "{name} Homers Twice as {team} Roll to Victory", s: "A hot streak continued with two home runs in a key matchup." },
      { h: "{name} Delivers Walk-Off Single in the Ninth", s: "Clutch hitting from {name} secured a dramatic win for the {team}." }
    ],
    pitcher: [
      { h: "{name} Tosses 7 Shutout Innings with 10 Strikeouts", s: "A dominant performance on the mound baffled opposing hitters." },
      { h: "{name} Earns the Save, Closing Out Tense Victory", s: "Coming in with the game on the line, {name} secured the final outs." }
    ]
  };

  function generateRealisticNews(count = 40) {
    const news = [];
    const sources = ["ESPN", "MLB.com", "Baseball America", "The Athletic", "College Baseball Daily"];
    for (let i = 0; i < count; i++) {
      const player = players[Math.floor(Math.random() * players.length)];
      const template = templates[player.type][Math.floor(Math.random() * templates[player.type].length)];
      news.push({
        headline: template.h.replace('{name}', player.name).replace('{team}', player.team),
        source: sources[Math.floor(Math.random() * sources.length)],
        date: new Date(Date.now() - Math.floor(Math.random() * 30) * 86400000).toISOString(),
        // Add player data for filtering
        level: player.level,
        grad_class: player.grad_class,
        status: player.status,
        player_name: player.name
      });
    }
    return news;
  }

  // --- HTML RENDERING ---
  function newsHTML(item){
    const imageUrl = `https://picsum.photos/seed/${encodeURIComponent(item.headline)}/600/800`;
    return `
    <div class="news-card">
      <div class="card-background" style="background-image: url('${imageUrl}')"></div>
      <div class="card-scrim"></div>
      <div class="card-content">
        <p class="news-card-meta">${item.source} • ${new Date(item.date).toLocaleDateString()}</p>
        <h3 class="news-card-title">${item.headline}</h3>
      </div>
    </div>`;
  }
  function renderNews(list){
    const grid = $('#newsGrid');
    if (!list || list.length === 0) {
      grid.innerHTML = `<p style="color:var(--muted); grid-column: 1 / -1;">No news matching the filter.</p>`;
      return;
    }
    const sortedList = list.sort((a,b) => new Date(b.date) - new Date(a.date));
    grid.innerHTML = sortedList.map(newsHTML).join('');
  }

  // --- FILTER LOGIC (from index.html, adapted for news) ---
  function populateFilters(newsItems) {
    const createCheckboxes = (items, selector) => {
      const container = $(selector);
      if (!container) return;
      container.innerHTML = '<label class="select-all-label"><input type="checkbox" class="select-all"> Select All</label>' +
        items.map(item => `<label><input type="checkbox" value="${item}"> ${item}</label>`).join('');
    };
    const levels = [...new Set(newsItems.map(p => p.level).filter(Boolean))].sort();
    const gradClasses = [...new Set(newsItems.map(p => p.grad_class).filter(Boolean))].sort((a,b)=> b-a);
    createCheckboxes(levels, '#filterLevels');
    createCheckboxes(gradClasses, '#filterGradClass');
  }

  function readFilters(){
    const getValues = selector => $$(selector).map(i => i.value);
    return {
      levels: getValues('#filterLevels input:checked:not(.select-all)'),
      status: getValues('#filterStatus input:checked:not(.select-all)'),
      classes: getValues('#filterGradClass input:checked:not(.select-all)'),
    };
  }
  
  function applyFilters(){
    if(!window.ALL_NEWS) return;
    const F = readFilters();
    const filtered = window.ALL_NEWS.filter(news => {
      const lvlOk = !F.levels.length || F.levels.includes(news.level);
      const statOk = !F.status.length || F.status.includes(news.status);
      const classOk = !F.classes.length || F.classes.includes(news.grad_class);
      return lvlOk && statOk && classOk;
    });
    renderNews(filtered);
  }

  function resetFilters(){
    $$('#filters input[type=checkbox]').forEach(i => i.checked = false);
    // Set default filter state if desired, e.g., check 'ACTIVE' by default
    $('#filterStatus input[value="ACTIVE"]').checked = true;
    applyFilters();
  }
  
  // --- UI SETUP ---
  function closeDrawers() { document.body.classList.remove('drawer-left-open', 'drawer-right-open'); }
  function setupEventListeners() {
    $('#btnMenu')?.addEventListener('click', () => document.body.classList.add('drawer-left-open'));
    $('#openFilters')?.addEventListener('click', () => document.body.classList.add('drawer-right-open'));
    $('#btnAccount')?.addEventListener('click', () => document.body.classList.add('drawer-right-open'));
    $$('.close-btn, .drawer-mask').forEach(el => el.addEventListener('click', closeDrawers));
    $('#filtersReset')?.addEventListener('click', resetFilters);
    $('#filters')?.addEventListener('change', (e) => {
      if (e.target.classList.contains('select-all')) {
        const isChecked = e.target.checked;
        e.target.closest('.filter-options').querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = isChecked);
      }
      applyFilters();
    });
  }
  
  // --- INITIALIZATION ---
  document.addEventListener('DOMContentLoaded', () => {
    // Fill in your header, drawers, and footer from index.html
    // For brevity, I've left them as comments in the HTML, but you should paste the full code.
    
    window.ALL_NEWS = generateRealisticNews(50);
    populateFilters(window.ALL_NEWS);
    resetFilters(); // This will apply the default filters and render the initial view
    setupEventListeners();
    // setupTheme(); // Add back if you have this function
    // setupAuth(); // Add back if you have this function
  });
</script>
</body>
</html>
