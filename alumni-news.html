<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Alumni News • Hamilton YATSTATS</title>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400&family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    body { margin:0; font-family: Oswald, sans-serif; background:#111; color:#fff; }
    header { display:flex; align-items:center; justify-content:space-between;
             padding:12px 20px; background:#000; }
    header h1 { font-family:'Bebas Neue', sans-serif; font-size:26px; margin:0; }
    .news-container { max-width:900px; margin:20px auto; padding:0 15px; }
    .news-card {
      display:flex; flex-direction:row; background:#1a1a1a; border-radius:8px;
      margin-bottom:15px; overflow:hidden;
    }
    .news-card img { width:160px; height:120px; object-fit:cover; }
    .news-content { flex:1; padding:10px 15px; }
    .news-content h3 { margin:0 0 8px; font-size:18px; }
    .meta { font-size:12px; color:#bbb; margin-bottom:6px; }
    .share { display:flex; gap:12px; margin-top:8px; font-size:18px; }
    .share i { cursor:pointer; }
    .empty { color:red; font-size:14px; }
  </style>
</head>
<body>
  <header>
    <h1>CHANDLER, AZ – HAMILTON HS BASEBALL ALUMNI</h1>
    <div class="icons">
      <i class="ri-menu-line"></i>
      <i class="ri-user-line"></i>
      <i class="ri-sun-line"></i>
    </div>
  </header>

  <div class="news-container" id="news">
    <p>Loading news…</p>
  </div>

<script>
const basePath = window.location.hostname.includes("github.io")
  ? "/hamilton-mvp"
  : "";

async function loadNews() {
  try {
    const res = await fetch(`${basePath}/assets/news/alumni_news.json`);
    if (!res.ok) throw new Error(`HTTP ${res.status}`);
    const items = await res.json();

    if (!Array.isArray(items) || items.length === 0) {
      document.querySelector("#news").innerHTML = "<p class='empty'>No news found.</p>";
      return;
    }

    const html = items.sort((a,b) =>
      new Date(b.publishedAt) - new Date(a.publishedAt)
    ).map(item => `
      <div class="news-card">
        <img src="${item.image}" alt="${item.player_display_name}">
        <div class="news-content">
          <h3>${item.title}</h3>
          <div class="meta">${item.level} • ${new Date(item.publishedAt).toLocaleString()} • ${item.player_display_name}</div>
          <a href="${item.url}" target="_blank" style="color:#4da6ff">Read More</a>
          <div class="share">
            <i class="ri-twitter-x-line" title="Share on X" onclick="share('${item.player_display_name}','x')"></i>
            <i class="ri-facebook-circle-line" title="Share on Facebook" onclick="share('${item.player_display_name}','facebook')"></i>
            <i class="ri-mail-line" title="Share via Email" onclick="share('${item.player_display_name}','email')"></i>
          </div>
        </div>
      </div>
    `).join("");

    document.querySelector("#news").innerHTML = html;

  } catch (err) {
    console.error("Error fetching news:", err);
    document.querySelector("#news").innerHTML = "<p class='empty'>Failed to load news.</p>";
  }
}

function share(name, platform) {
  const msg = `We See Where YAT, ${name.split(" ")[0]}! #YATABOY${name.split(" ")[0]}`;
  const url = encodeURIComponent(window.location.href);
  const text = encodeURIComponent(msg);
  let shareUrl = "";
  if (platform === "x") shareUrl = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
  if (platform === "facebook") shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`;
  if (platform === "email") shareUrl = `mailto:?subject=YAT?STATS Update&body=${text} ${url}`;
  window.open(shareUrl, "_blank");
}

document.addEventListener("DOMContentLoaded", loadNews);
</script>
</body>
</html>