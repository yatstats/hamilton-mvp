<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Next-Level All-Time List • Hamilton YAT?STATS</title>
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
/* -------------------- CORE THEME -------------------- */
:root{
  --bg:#0c0c0c; --fg:#f2f2f2; --muted:#c4c4c4; --ink:#e8e8e8; --line:rgba(255,255,255,.08);
  --card-bg:#171717; --header-bg:#000; --drawer-bg:rgba(10,10,10,.65);
  --hamSmall:13px; --hamBig:20px; --hamBigger:24px; --tagGrey:#cfd2d6;
  /* match index page crest height */
  --crestH:clamp(42px,6.3vw,74px);
  --containerPad:16px; --footerH:clamp(56px,8vh,77px);
  --gap:12px;
}
body.light-theme{
  --bg:#f4f4f4; --fg:#121212; --muted:#555; --ink:#222; --line:rgba(0,0,0,.1);
  --card-bg:#fff; --header-bg:#fff; --drawer-bg:rgba(255,255,255,.65);
}
@font-face{
  font-family:'Indigo';
  src:url('assets/fonts/Indigo.otf') format('opentype');
  font-weight:400;
  font-style:normal;
  font-display:swap;
}
*{box-sizing:border-box}
html,body{margin:0}
body{
  background:var(--bg);
  color:var(--fg);
  font-family:Oswald,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  transition:background-color .3s,color .3s;
}
a{color:inherit;text-decoration:none}
.container{max-width:1400px;margin:0 auto;padding:0 var(--containerPad)}

/* -------------------- HEADER -------------------- */
.header{
  position:sticky;
  top:0;
  z-index:50;
  background:var(--header-bg);
  transition:background-color .3s;
}
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:8px 0;
}
.left-icons{display:flex;align-items:center;gap:8px}
.icon-btn{
  background:none;
  border:none;
  color:var(--fg);
  opacity:.92;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  margin:0 2px;
  cursor:pointer;
}
.icon-btn i{font-size:20px}
.topnav{display:flex;gap:18px;align-items:center}
.nav-pair{white-space:nowrap}
.nav-pair .thin{
  font:300 var(--hamSmall) Oswald;
  letter-spacing:.02em;
  color:#cfd2d6;
  margin-right:2px;
}
body.light-theme .nav-pair .thin{color:var(--muted)}
.nav-pair .bold{
  font:400 var(--hamSmall) Indigo,"Bebas Neue",sans-serif;
}
.wordmark-wrap{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  min-width:120px;
}
.wordmark-img{
  height:clamp(18px,3.2vw,28px);
  width:auto;
  display:block;
}
body.light-theme .wordmark-img{filter:invert(1)}
@media (max-width:1200px){
  .topnav{display:none !important}
}
.hr-y{border-top:1px solid var(--line)}

/* school row – MATCH INDEX PAGE */
.schoolrow{
  display:flex;
  align-items:center;
  gap:12px;
  padding:6px var(--containerPad);
}
.ham-logo{
  height:var(--crestH);
  width:auto;
  object-fit:contain;
  display:block;
  flex-shrink:0;
}
.schooltext .small{
  font:300 var(--hamSmall)/1 Oswald;
  letter-spacing:.02em;
  color:var(--muted);
}
.schooltext .big1{
  font:400 var(--hamBig)/1 "Bebas Neue",sans-serif;
  letter-spacing:.09em;
}
.schooltext .big2{
  font:400 var(--hamBigger)/1 "Bebas Neue",sans-serif;
  letter-spacing:.09em;
  margin-top:-2px;
}

/* crumbs / hero */
.crumbs{
  font:300 calc(var(--hamSmall)*.5)/1 Oswald;
  letter-spacing:.02em;
  color:var(--muted);
  text-transform:uppercase;
}
.hero{padding:2px 0}
.hero-grid{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
}
.hero-left{display:flex;flex-direction:column;gap:4px}
.hero-right{display:flex;gap:10px}

/* -------------------- DRAWERS -------------------- */
.drawer-mask{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  opacity:0;
  pointer-events:none;
  transition:opacity .2s;
  z-index:60;
}
.drawer{
  position:fixed;
  top:0;
  bottom:0;
  width:min(360px,82vw);
  background:var(--drawer-bg);
  backdrop-filter:blur(4px);
  color:var(--ink);
  transform:translateX(-110%);
  transition:transform .25s,background-color .3s;
  z-index:70;
}
.drawer-right{
  right:0;
  left:auto;
  transform:translateX(110%);
  display:flex;
  flex-direction:column;
  height:100%;
}
.drawer h3{margin:18px 16px 8px;padding-right:30px}
.drawer .pad{padding:10px 16px}
.drawer .close-btn{position:absolute;top:12px;right:12px}
.drawer a{color:var(--ink)}
.drawer a:hover{color:var(--fg)}
body.drawer-left-open .drawer-mask,
body.drawer-right-open .drawer-mask{
  opacity:1;
  pointer-events:auto;
}
body.drawer-left-open #drawerLeft{transform:translateX(0)}
body.drawer-right-open .drawer-right{transform:translateX(0)}
.drawer-content{
  flex-grow:1;
  overflow-y:auto;
  padding:10px 16px;
}
.drawer-footer{
  flex-shrink:0;
  padding:12px 16px;
  border-top:1px solid var(--line);
  background:rgba(10,10,10,.8);
  display:flex;
  gap:10px;
  align-items:center;
}
body.light-theme .drawer-footer{background:rgba(255,255,255,.8)}

/* filter groups (right drawer) */
.filter-group{
  border-bottom:1px solid var(--line);
  padding:8px 0;
}
.filter-title{
  font:400 13px "Bebas Neue",sans-serif;
  letter-spacing:.08em;
  text-transform:uppercase;
  cursor:pointer;
}
.filter-options{
  margin-top:6px;
  font:300 12px Oswald;
  color:var(--ink);
}
.filter-options label{
  display:block;
  margin:3px 0;
}
.filter-options input[type="checkbox"]{
  margin-right:6px;
}
.select-all-label{
  font-weight:400;
  text-transform:uppercase;
}

/* -------------------- MAIN LAYOUT -------------------- */
.main{
  padding:8px 0 calc(var(--footerH) + 12px);
}

.alltime-header{
  margin:10px 0 14px;
}
.alltime-header-title{
  font:400 22px "Bebas Neue",sans-serif;
  letter-spacing:.12em;
}
.alltime-header-sub{
  font:300 13px Oswald;
  color:var(--muted);
  max-width:720px;
}

/* Search strip (inline, separate from drawer search) */
.alltime-search-row{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-bottom:10px;
}
.alltime-search-row input[type="text"]{
  flex:1;
  min-width:210px;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.04);
  color:var(--fg);
}

/* All-Time list */
.alltime-list{
  border-radius:14px;
  border:1px solid var(--line);
  background:var(--card-bg);
  padding:10px 10px 14px;
}

/* Grad class headers inside list */
.grad-header{
  margin:10px 4px 4px;
  font:400 16px "Bebas Neue",sans-serif;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:var(--muted);
}

/* Row */
.alltime-row{
  display:flex;
  flex-direction:column;
  gap:4px;
  padding:8px 6px;
  border-radius:10px;
  border:1px solid transparent;
}
.alltime-row:nth-child(odd){
  background:rgba(255,255,255,.01);
}
.alltime-row:hover{
  border-color:var(--line);
  background:rgba(255,255,255,.03);
}

.alltime-row-top{
  display:flex;
  flex-wrap:wrap;
  align-items:baseline;
  justify-content:space-between;
  gap:6px;
}
.alltime-name{
  font:400 18px "Bebas Neue",sans-serif;
  letter-spacing:.06em;
}
.alltime-tags{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  font:300 11px Oswald;
}
.tag-pill{
  padding:3px 8px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(0,0,0,.35);
  color:var(--tagGrey);
}
body.light-theme .tag-pill{
  background:rgba(255,255,255,.7);
  color:#111;
}
.tag-label{
  opacity:.8;
  margin-right:3px;
  text-transform:uppercase;
}
.alltime-notes{
  font:300 12px Oswald;
  color:var(--muted);
}

/* responsive */
@media (max-width:600px){
  .alltime-header-title{
    font-size:18px;
  }
}

/* Footer */
.site-footer{
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  height:var(--footerH);
  background:var(--bg);
  border-top:1px solid var(--line);
  z-index:40;
}
.site-footer a{display:block;height:100%;width:100%}
.site-footer img{height:100%;width:100%;object-fit:contain}

/* Focus */
.icon-btn:focus,button:focus,input:focus{
  outline:2px solid var(--fg);
  outline-offset:2px;
}
</style>
</head>
<body>
<!-- HEADER -->
<header class="header">
  <div class="container topbar">
    <div class="left-icons">
      <button class="icon-btn" id="btnMenu" aria-label="Menu"><i class="ri-menu-line"></i></button>
      <button class="icon-btn" id="btnAccount" aria-label="Account"><i class="ri-user-3-line"></i></button>
      <button class="icon-btn" id="theme-toggle" aria-label="Toggle Theme"><i class="ri-sun-line"></i></button>
    </div>

    <!-- TOP NAV – ORDER PER SPEC -->
    <nav class="topnav" aria-label="Top Navigation">
      <a href="index.html" class="nav-pair"><span class="thin">WHERE THEY</span><span class="bold">YAT?</span></a>
      <a href="alumni-news.html" class="nav-pair"><span class="thin">ACTIVE ALUMNI</span><span class="bold">NEWS</span></a>
      <a href="all-time-list.html" class="nav-pair"><span class="thin">NEXT-LEVEL</span><span class="bold">ALL-TIME LIST</span></a>
      <a href="current-team.html" class="nav-pair"><span class="thin">THE</span><span class="bold">CURRENT TEAM</span></a>
      <a href="marketplace.html" class="nav-pair"><span class="thin">MENTORSHIP</span><span class="bold">MARKETPLACE</span></a>
      <a href="partner-program.html" class="nav-pair"><span class="thin">PCD ACTION</span><span class="bold">PARTNER PROGRAM</span></a>
      <a href="faq.html" class="nav-pair"><span class="bold">FAQ’S</span></a>
    </nav>

    <div class="wordmark-wrap">
      <img class="wordmark-img" src="assets/img/yatstats-logo.png" alt="YAT?STATS">
    </div>
  </div>
  <div class="hr-y"></div>

  <!-- SCHOOL ROW (MATCH INDEX) -->
  <div class="container schoolrow">
    <img id="hamLogo" class="ham-logo"
         src="assets/img/schools/hamilton.az.png"
         alt="Hamilton H"
         onerror="this.src='assets/img/placeholder.png';">
    <div class="schooltext">
      <div class="small">CHANDLER, AZ</div>
      <div class="big1">HAMILTON HIGH SCHOOL</div>
      <div class="big2">ACTIVE BASEBALL ALUMNI</div>
    </div>
  </div>

  <div class="hr-y"></div>
  <section class="hero">
    <div class="container hero-grid">
      <div class="hero-left" aria-live="polite">
        <div class="crumbs">HAMILTON ▸ NEXT-LEVEL ALL-TIME LIST</div>
      </div>
      <div class="hero-right">
        <button id="openSearch" class="hero-icon icon-btn" aria-label="Open search"><i class="ri-search-line"></i></button>
        <button id="openFilters" class="hero-icon icon-btn" aria-label="Open filters"><i class="ri-filter-3-line"></i></button>
        <button id="filtersReset2" class="hero-icon icon-btn" aria-label="Reset filters"><i class="ri-restart-line"></i></button>
      </div>
    </div>
  </section>
</header>

<!-- DRAWERS -->
<div class="drawer-mask"></div>

<!-- LEFT: PLAYER SEARCH + NAV -->
<aside class="drawer" id="drawerLeft" aria-label="Left drawer">
  <button class="icon-btn close-btn"><i class="ri-close-line"></i></button>
  <div class="drawer-content">
    <h3>PLAYER PROFILE SEARCH</h3>
    <div class="pad">
      <input id="playerSearch" placeholder="Type to search…" style="width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:rgba(255,255,255,.06);color:var(--ink)">
      <div id="liveResults"></div>
    </div>
    <h3>NAVIGATION</h3>
    <div class="pad" style="display:flex;flex-direction:column;gap:12px">
      <a href="index.html" class="nav-pair"><span class="thin">WHERE THEY</span><span class="bold">YAT?</span></a>
      <a href="alumni-news.html" class="nav-pair"><span class="thin">ACTIVE ALUMNI</span><span class="bold">NEWS</span></a>
      <a href="all-time-list.html" class="nav-pair"><span class="thin">NEXT-LEVEL</span><span class="bold">ALL-TIME LIST</span></a>
      <a href="current-team.html" class="nav-pair"><span class="thin">THE</span><span class="bold">CURRENT TEAM</span></a>
      <a href="marketplace.html" class="nav-pair"><span class="thin">MENTORSHIP</span><span class="bold">MARKETPLACE</span></a>
      <a href="partner-program.html" class="nav-pair"><span class="thin">PCD ACTION</span><span class="bold">PARTNER PROGRAM</span></a>
      <a href="faq.html" class="nav-pair"><span class="bold">FAQ’S</span></a>
    </div>
  </div>
</aside>

<!-- RIGHT: FILTERS -->
<aside class="drawer drawer-right" id="drawerFilters" style="display:flex;">
  <button class="icon-btn close-btn"><i class="ri-close-line"></i></button>
  <h3>FILTER ALL-TIME LIST</h3>
  <div class="drawer-content" id="filters">
    <details class="filter-group" open>
      <summary class="filter-title">By Name</summary>
      <div class="filter-options">
        <input id="filterName" placeholder="Type a name…" style="width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:rgba(255,255,255,.06);color:var(--ink)"/>
      </div>
    </details>

    <details class="filter-group">
      <summary class="filter-title">By Status</summary>
      <div class="filter-options" id="filterStatus">
        <!-- dynamically populated -->
      </div>
    </details>

    <details class="filter-group">
      <summary class="filter-title">By Level</summary>
      <div class="filter-options" id="filterLevels">
        <!-- dynamically populated -->
      </div>
    </details>

    <details class="filter-group">
      <summary class="filter-title">By Graduating Class</summary>
      <div class="filter-options" id="filterGradClass">
        <!-- dynamically populated -->
      </div>
    </details>

    <details class="filter-group">
      <summary class="filter-title">By Varsity Years</summary>
      <div class="filter-options" id="filterVarsity">
        <!-- dynamically populated -->
      </div>
    </details>
  </div>

  <div class="drawer-footer">
    <button id="filtersReset" class="icon-btn" style="padding:10px 14px;border:1px solid var(--line);border-radius:12px">
      <i class="ri-restart-line"></i>&nbsp;Reset Filters
    </button>
  </div>
</aside>

<!-- MAIN -->
<main class="main container">
  <section class="alltime-header">
    <div class="alltime-header-title">NEXT-LEVEL ALL-TIME LIST</div>
    <div class="alltime-header-sub">
      Every Husky who reached the next level. Default view shows everyone, sorted by
      Grad Class, Level, Varsity Years, then alphabetically.
    </div>
  </section>

  <section class="alltime-search-row">
    <input id="inlineSearch" type="text" placeholder="Quick search by player name…">
  </section>

  <section id="allTimeList" class="alltime-list" aria-live="polite">
    <p style="color:var(--muted);margin:4px 2px;">Loading all-time list…</p>
  </section>
</main>

<footer class="site-footer">
  <a href="https://www.americanpromo.com/" target="_blank" rel="noopener noreferrer">
    <img src="assets/img/partners/american_banner.png" alt="Sponsor Banner">
  </a>
</footer>

<!-- ---------------- DEMO DATA / STRUCTURE ---------------- -->
<!-- Replace this JSON with your real all-time player data -->
<script type="application/json" id="alltime-json">
{
  "players":[
    {
      "name":"Cody Bellinger",
      "status":"ACTIVE 2025",
      "grad_class":2013,
      "level":"MLB",
      "varsity_years":"2010–2013",
      "notes":"Chicago Cubs – Outfielder"
    },
    {
      "name":"Drew Swift",
      "status":"ACTIVE 2025",
      "grad_class":2016,
      "level":"AA",
      "varsity_years":"2013–2016",
      "notes":"Erie SeaWolves – INF"
    },
    {
      "name":"Dom Hamel",
      "status":"ACTIVE 2025",
      "grad_class":2015,
      "level":"AAA",
      "varsity_years":"2013–2015",
      "notes":"AAA – RHP"
    },
    {
      "name":"Patrick Murphy",
      "status":"INTERNATIONAL",
      "grad_class":2013,
      "level":"INTERNATIONAL",
      "varsity_years":"2011–2013",
      "notes":"KBO – RHP"
    },
    {
      "name":"Ryan Kucherak",
      "status":"ACTIVE 2025",
      "grad_class":2022,
      "level":"NCAA-D1",
      "varsity_years":"2020–2022",
      "notes":"Northwestern University"
    }
  ]
}
</script>

<script>
/*** --------------- SMALL UTILS --------------- ***/
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

function setStickyTop(){
  const header = document.querySelector('.header');
  const top = (header?.offsetHeight || 120) + 10;
  document.documentElement.style.setProperty('--stickyTop', top + 'px');
}

/*** ------------- THEME + DRAWERS ------------- ***/
function setupTheme(){
  const btn = $('#theme-toggle'); if (!btn) return;
  const icon = btn.querySelector('i');
  const apply = ()=>{
    const saved = localStorage.getItem('theme');
    if (saved === 'light'){
      document.body.classList.add('light-theme');
      icon?.classList.replace('ri-sun-line','ri-moon-line');
    } else {
      document.body.classList.remove('light-theme');
      icon?.classList.replace('ri-moon-line','ri-sun-line');
    }
  };
  btn.addEventListener('click', ()=>{
    document.body.classList.toggle('light-theme');
    localStorage.setItem('theme',
      document.body.classList.contains('light-theme') ? 'light' : 'dark'
    );
    apply();
  });
  apply();
}

function setupDrawers(){
  const mask = document.querySelector('.drawer-mask');
  const closeAll = ()=>document.body.classList.remove('drawer-left-open','drawer-right-open','drawer-open');

  $('#btnMenu')?.addEventListener('click', ()=>{
    document.body.classList.add('drawer-left-open','drawer-open');
  });

  $('#openSearch')?.addEventListener('click', ()=>{
    document.body.classList.add('drawer-left-open','drawer-open');
  });

  $('#openFilters')?.addEventListener('click', ()=>{
    document.body.classList.add('drawer-right-open','drawer-open');
  });

  // Account button can share right-drawer in future if needed
  $('#btnAccount')?.addEventListener('click', ()=>{
    document.body.classList.add('drawer-right-open','drawer-open');
  });

  $$('.close-btn').forEach(b=>b.addEventListener('click', closeAll));
  mask?.addEventListener('click', closeAll);
}

/*** --------------- ALL-TIME LIST LOGIC --------------- ***/
let ALL_PLAYERS = [];

function parseAllTimeJSON(){
  try{
    const raw = $('#alltime-json')?.textContent || '{}';
    const data = JSON.parse(raw);
    const list = Array.isArray(data.players) ? data.players : [];
    // normalize fields
    return list.map(p => ({
      name: String(p.name || '').trim(),
      status: String(p.status || '').trim(),
      grad_class: p.grad_class ? Number(p.grad_class) : null,
      level: String(p.level || '').trim(),
      varsity_years: String(p.varsity_years || '').trim(),
      notes: String(p.notes || '').trim()
    })).filter(p => p.name);
  } catch(e){
    console.error('All-time JSON parse failed:', e);
    return [];
  }
}

function extractFirstYear(s){
  if (!s) return null;
  const match = String(s).match(/(19|20)\d{2}/);
  return match ? Number(match[0]) : null;
}

// sort: Grad Class (desc), then Level, Varsity Years, Name
function sortPlayers(list){
  return list.slice().sort((a,b)=>{
    const gA = a.grad_class ?? -9999;
    const gB = b.grad_class ?? -9999;
    if (gA !== gB) return gB - gA; // newer grad class first

    // Level string compare
    const lA = a.level.toUpperCase();
    const lB = b.level.toUpperCase();
    if (lA !== lB) return lA.localeCompare(lB);

    // Varsity years – try earliest year, then fallback to string
    const yA = extractFirstYear(a.varsity_years);
    const yB = extractFirstYear(b.varsity_years);
    if (yA != null && yB != null && yA !== yB) return yA - yB;
    if (a.varsity_years !== b.varsity_years)
      return a.varsity_years.localeCompare(b.varsity_years);

    // Finally, alphabetically by name
    return a.name.localeCompare(b.name);
  });
}

/*** --------------- FILTERING --------------- ***/
function collectFilterSets(players){
  const statuses = new Set();
  const levels = new Set();
  const grads = new Set();
  const varsity = new Set();

  players.forEach(p=>{
    if (p.status) statuses.add(p.status);
    if (p.level) levels.add(p.level);
    if (p.grad_class) grads.add(p.grad_class);
    if (p.varsity_years) varsity.add(p.varsity_years);
  });

  return {
    statuses: Array.from(statuses).sort(),
    levels: Array.from(levels).sort(),
    grads: Array.from(grads).sort((a,b)=>b-a),   // show newest grad class first
    varsity: Array.from(varsity).sort()
  };
}

function renderFilterCheckboxes(id, values){
  const mount = $(id);
  if (!mount) return;
  if (!values.length){
    mount.innerHTML = '<div style="opacity:.7">No data</div>';
    return;
  }
  const html = [
    `<label class="select-all-label"><input type="checkbox" class="select-all" checked> Select All</label>`
  ].concat(values.map(v=>(
    `<label><input type="checkbox" value="${String(v).replace(/"/g,'&quot;')}" checked> ${v}</label>`
  )));
  mount.innerHTML = html.join('');
}

function getActiveFilters(){
  const nameQ = ($('#filterName')?.value || '').trim().toLowerCase();
  // inline search is OR’d with drawer name search
  const inlineQ = ($('#inlineSearch')?.value || '').trim().toLowerCase();
  const combinedNameQ = [nameQ, inlineQ].filter(Boolean).join(' ');

  const collect = sel => {
    const root = $(sel);
    if (!root) return null;
    const picks = Array.from(root.querySelectorAll('input[type="checkbox"]:not(.select-all):checked'))
      .map(i=>i.value);
    return picks.length ? new Set(picks) : null;
  };

  return {
    nameQ: combinedNameQ,
    statuses: collect('#filterStatus'),
    levels: collect('#filterLevels'),
    grads: collect('#filterGradClass'),
    varsity: collect('#filterVarsity')
  };
}

function applyFilters(players){
  const {nameQ, statuses, levels, grads, varsity} = getActiveFilters();

  return players.filter(p=>{
    if (nameQ){
      const q = nameQ;
      const target = (p.name + ' ' + p.notes).toLowerCase();
      if (!target.includes(q)) return false;
    }

    if (statuses && !statuses.has(p.status)) return false;
    if (levels && !levels.has(p.level)) return false;
    if (grads && !grads.has(String(p.grad_class))) return false;
    if (varsity && !varsity.has(p.varsity_years)) return false;

    return true;
  });
}

/*** --------------- RENDER LIST --------------- ***/
function renderAllTimeList(){
  const mount = $('#allTimeList');
  if (!mount) return;

  if (!ALL_PLAYERS.length){
    mount.innerHTML = '<p style="color:var(--muted);margin:4px 2px;">No all-time data yet.</p>';
    return;
  }

  const sorted = sortPlayers(applyFilters(ALL_PLAYERS));

  if (!sorted.length){
    mount.innerHTML = '<p style="color:var(--muted);margin:4px 2px;">No players match your filters.</p>';
    return;
  }

  let html = '';
  let currentGrad = null;

  sorted.forEach(p=>{
    const grad = p.grad_class || '—';
    if (grad !== currentGrad){
      currentGrad = grad;
      html += `<h3 class="grad-header">CLASS OF ${grad}</h3>`;
    }
    html += `
      <article class="alltime-row">
        <div class="alltime-row-top">
          <div class="alltime-name">${p.name}</div>
          <div class="alltime-tags">
            ${p.status ? `<span class="tag-pill"><span class="tag-label">Status</span>${p.status}</span>` : ''}
            ${p.level ? `<span class="tag-pill"><span class="tag-label">Level</span>${p.level}</span>` : ''}
            ${p.varsity_years ? `<span class="tag-pill"><span class="tag-label">Varsity</span>${p.varsity_years}</span>` : ''}
          </div>
        </div>
        ${p.notes ? `<div class="alltime-notes">${p.notes}</div>` : ''}
      </article>
    `;
  });

  mount.innerHTML = html;
}

/*** --------------- RESET FILTERS --------------- ***/
function resetFilters(){
  // clear name inputs
  if ($('#filterName')) $('#filterName').value = '';
  if ($('#inlineSearch')) $('#inlineSearch').value = '';

  // select-all checked = true for each block
  ['#filterStatus','#filterLevels','#filterGradClass','#filterVarsity'].forEach(sel=>{
    const root = $(sel);
    if (!root) return;
    root.querySelectorAll('input[type="checkbox"]').forEach(cb=>cb.checked = true);
  });
}

/*** ----------------- BOOT ----------------- ***/
document.addEventListener('DOMContentLoaded', ()=>{
  setupTheme();
  setupDrawers();
  setStickyTop();
  window.addEventListener('resize', setStickyTop);

  // Load all-time data
  ALL_PLAYERS = parseAllTimeJSON();

  // Build filter options based on data
  const sets = collectFilterSets(ALL_PLAYERS);
  renderFilterCheckboxes('#filterStatus', sets.statuses);
  renderFilterCheckboxes('#filterLevels', sets.levels);
  renderFilterCheckboxes('#filterGradClass', sets.grads);
  renderFilterCheckboxes('#filterVarsity', sets.varsity);

  // Event wiring
  $('#filters')?.addEventListener('change', e=>{
    if (e.target.classList.contains('select-all')){
      const on = e.target.checked;
      e.target.closest('.filter-options')
        ?.querySelectorAll('input[type="checkbox"]:not(.select-all)')
        .forEach(cb=>cb.checked = on);
    }
    renderAllTimeList();
  });

  $('#filtersReset')?.addEventListener('click', e=>{
    e.preventDefault();
    resetFilters();
    renderAllTimeList();
  });
  $('#filtersReset2')?.addEventListener('click', e=>{
    e.preventDefault();
    resetFilters();
    renderAllTimeList();
  });

  $('#filterName')?.addEventListener('input', ()=>renderAllTimeList());
  $('#inlineSearch')?.addEventListener('input', ()=>renderAllTimeList());

  // Initial render per spec: all players, sorted Grad Class → Level → Varsity → Name
  renderAllTimeList();
});
</script>
</body>
</html>