<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YATSTATS – HS Baseball Program Search</title>

  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
      window.FontAwesomeConfig = { autoReplaceSvg: 'nest' };
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous"></script>

  <!-- your existing styles -->
  <style>
    * { font-family: 'Inter', sans-serif; }
    ::-webkit-scrollbar { display: none; }
  </style>
</head>
<body class="h-full text-base-content">

<main id="main-content" class="relative overflow-hidden">

  <!-- HEADER -->
  <header id="header" class="absolute top-0 left-0 right-0 z-30 bg-black/30 backdrop-blur-sm">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
      <div class="text-3xl font-black tracking-wider text-white">YATSTATS</div>
    </div>
  </header>

  <!-- HERO -->
  <section id="hero-section" class="relative h-[900px] flex items-center justify-center text-center text-white">
    <div class="absolute inset-0 bg-black/60 z-10"></div>
    <div class="absolute inset-0 w-full h-full overflow-hidden">
      <img class="w-full h-full object-cover" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/3092fdc45d-c667c2c1a0a9ceaf650c.png">
    </div>
    <div class="relative z-20 container mx-auto px-6">
      <h1 class="text-5xl md:text-7xl font-black uppercase mb-4">Tracking Yesterday’s Athletes as College and Pros Today!</h1>
      <p class="text-xl md:text-2xl mb-8">Discover the high school origins of today's baseball stars. Search our database of 17,000+ programs.</p>
    </div>
  </section>

  <!-- SEARCH -->
  <section id="search-section" class="py-20 bg-brand-navy">
    <div class="container mx-auto px-6 text-center">
      <h2 class="text-4xl font-bold mb-4 text-white">Search the Database</h2>
      <p class="text-brand-silver mb-10">Enter a high school name, city, or region.</p>

      <div id="search-container" class="max-w-2xl mx-auto">
        <div class="flex flex-col sm:flex-row gap-4 mb-6">
          <input type="text" id="school-search-input"
                 class="w-full flex-grow bg-brand-steel border-2 border-brand-steel text-white placeholder-brand-silver text-lg rounded-md p-4 focus:outline-none focus:ring-2 focus:ring-brand-red"
                 placeholder="E.g., Hamilton High School">
          <button id="search-button" class="bg-brand-red text-white font-bold py-4 px-8 rounded-md text-lg hover:bg-red-700 flex items-center justify-center">
            <i class="mr-2 fa-solid fa-magnifying-glass"></i> Search
          </button>
        </div>
      </div>

      <div id="results-container" class="mt-8 min-h-[250px] bg-brand-blue rounded-lg p-8 max-w-3xl mx-auto transition-opacity duration-500 opacity-0">
        <div id="loading-spinner" class="hidden text-center">
          <i class="fa-solid fa-baseball fa-spin text-5xl text-brand-silver"></i>
          <p class="mt-4 text-lg text-white">Searching the archives...</p>
        </div>
        <div id="results-content" class="hidden w-full"></div>
      </div>
    </div>
  </section>

  <!-- OTHER SECTIONS (About, Data Highlights, Contact, Footer)... -->
  <!-- You can leave your existing content below untouched -->

</main>

<!-- GOOGLE SHEET SEARCH SCRIPT -->
<script>
  const SHEET_URL = "https://opensheet.elk.sh/1JXhpck9_qpJVOBMoAkIWSUbIZClNv0k9/HS_Baseball_Programs";
  let rows = [];

  async function loadData() {
    try {
      const res = await fetch(SHEET_URL);
      rows = await res.json();
    } catch (err) {
      console.error("Error loading sheet:", err);
    }
  }

  function search(query) {
    const resultsBox = document.getElementById("results-container");
    const resultsContent = document.getElementById("results-content");
    const spinner = document.getElementById("loading-spinner");

    resultsBox.classList.remove("opacity-0");
    resultsContent.classList.add("hidden");
    spinner.classList.remove("hidden");

    setTimeout(() => {
      query = query.trim().toLowerCase();
      let matches = [];
      if (query) {
        matches = rows.filter(r =>
          (r.hsname && r.hsname.toLowerCase().includes(query)) ||
          (r.city && r.city.toLowerCase().includes(query)) ||
          (r.regionname && r.regionname.toLowerCase().includes(query))
        );
      }

      spinner.classList.add("hidden");
      resultsContent.classList.remove("hidden");
      resultsContent.innerHTML = "";

      if (matches.length === 0) {
        resultsContent.innerHTML = "<p class='text-white'>No matches found.</p>";
        return;
      }

      matches.slice(0, 20).forEach(r => {
        const div = document.createElement("div");
        div.className = "p-3 mb-2 bg-brand-steel rounded text-white";
        div.textContent = `${r.hsname} — ${r.city || ""} ${r.regionname || ""}`;
        resultsContent.appendChild(div);
      });
    }, 400);
  }

  document.getElementById("search-button").addEventListener("click", () => {
    const val = document.getElementById("school-search-input").value;
    search(val);
  });

  document.getElementById("school-search-input").addEventListener("keypress", e => {
    if (e.key === "Enter") {
      e.preventDefault();
      search(e.target.value);
    }
  });

  loadData();
</script>

</body>
</html>