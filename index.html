<!-- YATSTATS • Hamilton • build 5.0.4 -->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Where They YAT? • Hamilton YATSTATS</title>
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0c0c0c; --fg:#f2f2f2; --muted:#c4c4c4; --ink:#e8e8e8; --line:rgba(255,255,255,0.08);
  --hamSmall:13px; --hamBig:20px; --hamBigger:24px; --tagGrey:#cfd2d6;
  /* CHANGE: Set a fixed but responsive height for the logo to prevent distortion */
  --crestH: clamp(60px, 7vw, 72px);
  --pairGap: 10px;
  --containerPad: 16px;
  --footerH: clamp(56px, 8vh, 77px);
}
@font-face{ font-family:'Indigo'; src:url('assets/fonts/Indigo.otf') format('opentype'); font-weight:400; font-style:normal; font-display:swap; }

*{box-sizing:border-box} html,body{margin:0}
body{background:var(--bg);color:var(--fg);font-family:Oswald,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.container{max-width:1280px;margin:0 auto;padding:0 var(--containerPad)}
@media (max-width:520px){ .container{padding:0 12px} }
/* CHANGE: Apply full-width ONLY to the main card grid container on wide screens */
@media (min-width: 1281px) { .main.container {max-width: none;} }

/* HEADER */
.header{position:sticky;top:0;z-index:50;background:#000}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
.left-icons{display:flex;align-items:center;gap:8px}
.icon-btn{background:none;border:none;color:var(--fg);opacity:.92;display:inline-flex;align-items:center;justify-content:center;padding:0;margin:0 2px}
.icon-btn i{font-size:20px}

.topnav{display:flex;gap:18px;align-items:center}
.nav-pair{white-space:nowrap}
.nav-pair .thin{font:300 var(--hamSmall) Oswald, sans-serif; letter-spacing:.02em; color:#cfd2d6; margin-right:2px}
.nav-pair .bold{font:400 var(--hamSmall) Indigo, "Bebas Neue", sans-serif}
.wordmark-wrap{display:flex;align-items:center;justify-content:flex-end;min-width:120px}
.wordmark-img{height:clamp(18px,3.2vw,28px);width:auto;display:block}
@media (max-width:1200px){ .topnav{display:none !important} }

.hr-y{border-top:1px solid var(--line)}
.schoolrow{display:flex;align-items:center;gap:var(--pairGap);padding:6px 0}
.ham-logo{height:var(--crestH);width:auto;object-fit:contain;display:block}
/* CHANGE: Make school text block match logo height and align text vertically */
.schooltext{
  height: var(--crestH);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  line-height:1;
  padding: 2px 0; /* small padding so text isn't flush with the edges */
}
.schooltext .small{font:300 var(--hamSmall)/1 Oswald;letter-spacing:.02em;color:var(--muted)}
.schooltext .big1{font:400 var(--hamBig)/1 "Bebas Neue",sans-serif}
/* CHANGE: Removed negative margin to help with alignment */
.schooltext .big2{font:400 var(--hamBigger)/1 "Bebas Neue",sans-serif;}
.crumbs{font:300 calc(var(--hamSmall)*.5)/1 Oswald;letter-spacing:.02em;color:var(--muted);text-transform:uppercase}

/* HERO (animated tagline) */
.hero{
  /* CHANGE: Adjusted padding to reduce empty space */
  padding: 4px 0 8px 0;
  background: #000;
}
.hero-grid{display:flex;align-items:center;justify-content:space-between;gap:16px}
.hero-left{display:flex;flex-direction:column;gap:4px}
.hero-crumbs{margin:0; text-align:left; white-space:nowrap}

.tag-duo{position:relative;height:1.8em}
.tag-swap{position:absolute;left:0;top:0;right:0;opacity:0;animation:swap 6s infinite;white-space:nowrap}
.tag-swap:nth-child(1){animation-delay:0s}
.tag-swap:nth-child(2){animation-delay:3s}
.tag-grey{font:300 1em Oswald,sans-serif;letter-spacing:.02em;color:var(--tagGrey)}
.tag-bold{font:400 1em Indigo,"Bebas Neue",sans-serif}
@keyframes swap{0%{opacity:0}5%{opacity:1}45%{opacity:1}50%{opacity:0}100%{opacity:0}}
.hero-right{display:flex;gap:10px}
.hero-icon i{font-size:20px}

/* DRAWERS */
.drawer-mask{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:opacity .2s;z-index:60}
.drawer{position:fixed;top:0;bottom:0;width:min(360px,82vw);background:rgba(10,10,10,.65);backdrop-filter:blur(4px);color:#e8e8e8;transform:translateX(-110%);transition:transform .25s;z-index:70}
.drawer-right{right:0;left:auto;transform:translateX(110%)}
.drawer h3{margin:18px 16px 8px}
.drawer .pad{padding:10px 16px}
.drawer .close-btn{margin:8px 16px}
.drawer a{color:#e8e8e8}
.drawer a:hover{color:#fff}
body.drawer-left-open .drawer-mask,body.drawer-right-open .drawer-mask{opacity:1;pointer-events:auto}
body.drawer-left-open #drawerLeft{transform:translateX(0)}
body.drawer-right-open #drawerRight{transform:translateX(0)}
#liveResults{margin:10px 4px 18px;max-height:55vh;overflow:auto}
.live-hit{padding:10px 12px;display:flex;align-items:center;gap:10px;border-radius:10px;cursor:pointer}
.live-hit:hover{background:rgba(255,255,255,.08)}
.live-hit img{width:36px;height:36px;border-radius:6px;object-fit:cover}

/* GRID + CARDS */
.main{padding:16px 0 calc(var(--footerH) + 16px)}
.grid{display:grid;gap:16px}
@media (min-width:1300px){ .grid{grid-template-columns:repeat(5,1fr)}}
@media (max-width:1299px){ .grid{grid-template-columns:repeat(4,1fr)}}
@media (max-width:1024px){ .grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:768px){  .grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:520px){  .grid{grid-template-columns:repeat(1,1fr); gap: 20px;}}

/* CARD REDESIGN */
.card{position:relative;background:#171717;border-radius:16px;overflow:hidden; color: #fff;}
.card::before{content:"";display:block;padding-top:140%}
.card-inner{position:absolute;inset:0;perspective:1200px}
.flip{position:absolute;inset:0;transform-style:preserve-3d;transition:transform .6s cubic-bezier(.2,.7,.2,1)}
.card.is-flipped .flip{transform:rotateY(180deg)}
.face{position:absolute;inset:0;backface-visibility:hidden; display: flex; flex-direction: column;}
.face.back{transform:rotateY(180deg)}

/* Front Face Redesign */
.face.front{justify-content:flex-end; overflow: hidden;}
.bg{position:absolute;inset:0;background:#111 center/cover no-repeat; transform: scale(1.05);}
.card-gradient{position:absolute;inset:0;background:linear-gradient(transparent 35%, rgba(0,0,0,0.7) 65%, rgba(0,0,0,0.95) 100%);}

.card-content{position:relative; z-index:2; padding:14px; display: flex; flex-direction: column; gap: 10px;}
.player-details .name{font:400 26px/1 "Indigo","Bebas Neue",sans-serif;letter-spacing:.02em;}
.player-details .team{font:300 12px/1.2 Oswald;opacity:.9; margin-top: 2px;}

.game-stats{display:flex;gap:10px;font-size:11px; font-family: Oswald, sans-serif;}
.game-box{background:rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius:8px; padding:6px 8px; flex:1;}
.game-box .title{font-weight:300; opacity:.7; letter-spacing: 0.05em; font-size: 10px;}
.game-box .data{font-weight:400; letter-spacing: 0.02em;}

.card-chips{display:flex;gap:8px;flex-wrap:wrap;}
.chip{background:#fff;color:#111;border-radius:28px;padding:5px 10px;font-weight:700;font-size:10px; text-transform: uppercase;}
.chip.level-mlb{background:#002D72; color:#fff;}
.chip.level-triple-a{background:#BF0D3E; color:#fff;}
.chip.level-double-a{background:#FF671F; color:#fff;}
.chip.level-high-a{background:#007A33; color: #fff;}
.chip.level-low-a{background:#0057B7; color: #fff;}
.chip.level-ncaa-d1{background:#78BE20; color:#111;}
.chip.status-active{background:rgba(40,167,69,0.8); color:#fff;}


.dots{display:flex;gap:6px;z-index:2;}
.dot{width:24px;height:24px;border-radius:999px;background:#f3f4f6;color:#111;display:grid;place-items:center;
     font:900 11px/1 Oswald;border:1px solid rgba(0,0,0,.25)}

/* Back Face */
.back-head{padding:10px 12px;border-bottom:1px solid rgba(0,0,0,.08);display:flex;justify-content:space-between;align-items:center;background:#fff; color: #111;}
.back-body{padding:12px;background:#fff;color:#111; flex: 1;}

/* STICKY SPONSOR FOOTER */
.site-footer{position:fixed;left:0;right:0;bottom:0;height:var(--footerH);background:#0b0b0b;border-top:1px solid var(--line);z-index:40}
.site-footer .wrap{height:100%;display:flex;align-items:center;justify-content:center;padding:0 var(--containerPad)}
.sponsor-banner{height:calc(var(--footerH) - 12px); width:100%; display:flex;align-items:center;justify-content:center}
.sponsor-banner img{
  height:100%; width:100%; object-fit:contain;
  filter: saturate(.95);
}
</style>
</head>

<body>
<header class="header">
  <div class="container topbar">
    <div class="left-icons">
      <button class="icon-btn" id="btnMenu" aria-label="Menu"><i class="ri-menu-line"></i></button>
      <button class="icon-btn" id="btnAccount" aria-label="Account"><i class="ri-user-3-line"></i></button>
      <button class="icon-btn" id="btnTheme" aria-label="Theme"><i class="ri-moon-line"></i></button>
    </div>

    <nav class="topnav" aria-label="Top Navigation">
      <span class="nav-pair"><span class="thin">WHERE THEY</span><span class="bold">YAT?</span></span>
      <span class="nav-pair"><span class="thin">ACTIVE ALUMNI</span><span class="bold">NEWS</span></span>
      <span class="nav-pair"><span class="thin">NEXT-LEVEL</span><span class="bold">ALL-TIME LIST</span></span>
      <span class="nav-pair"><span class="thin">NIL & YAT-A-BOY</span><span class="bold">MARKETPLACE</span></span>
      <span class="nav-pair"><span class="thin">THE</span><span class="bold">CURRENT TEAM</span></span>
      <span class="nav-pair"><span class="thin">PCD ACTION</span><span class="bold">PARTNER PROGRAM</span></span>
      <span class="nav-pair"><span class="thin"></span><span class="bold">FAQ’S</span></span>
    </nav>

    <div class="wordmark-wrap">
      <img class="wordmark-img" src="assets/img/yatstats-logo.png" alt="YAT?STATS">
    </div>
  </div>

  <div class="hr-y"></div>

  <div class="container schoolrow">
    <img id="hamLogo" class="ham-logo" src="assets/img/hamilton-logo.png" alt="Hamilton H">
    <div class="schooltext">
      <div class="small">CHANDLER, AZ</div>
      <div class="big1">HAMILTON HIGH SCHOOL</div>
      <div class="big2">ACTIVE ALUMNI</div>
    </div>
  </div>

  <div class="hr-y"></div>

  <section class="hero">
    <div class="container hero-grid">
      <div class="hero-left" aria-live="polite">
        <div class="tag-duo">
          <div class="tag-swap"><span class="tag-grey">WHERE THEY</span> <span class="tag-bold">YAT?</span></div>
          <div class="tag-swap"><span class="tag-grey">FLIP FOR</span> <span class="tag-bold">STATS!</span></div>
        </div>
        <div class="crumbs hero-crumbs">HAMILTON ▸ WHERE THEY YAT?</div>
      </div>
  
      <div class="hero-right">
        <button id="openSearch" class="hero-icon icon-btn" aria-label="Open search"><i class="ri-search-line"></i></button>
        <button id="openFilters" class="hero-icon icon-btn" aria-label="Open filters"><i class="ri-filter-3-line"></i></button>
        <button id="filtersReset2" class="hero-icon icon-btn" aria-label="Reset"><i class="ri-restart-line"></i></button>
      </div>
    </div>
  </section>
</header>

<main class="main container">
  <div id="cardGrid" class="grid" aria-live="polite"></div>
</main>

<div class="drawer-mask"></div>
<aside class="drawer" id="drawerLeft" aria-label="Left drawer">
  <h3>PLAYER PROFILE SEARCH</h3>
  <div class="pad">
    <input id="playerSearch" placeholder="Type to search…" style="width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:rgba(255,255,255,.06);color:var(--ink)">
    <div id="liveResults"></div>
  </div>
  <div class="pad">
    <h3>Navigation</h3>
    <div style="display:flex;flex-direction:column;gap:12px">
      <a href="index.html"><span class="thin">WHERE THEY</span> <span class="bold">YAT?</span></a>
          </div>
  </div>
  <button class="icon-btn close-btn" onclick="document.body.classList.remove('drawer-left-open')"><i class="ri-close-line"></i></button>
</aside>
<aside class="drawer drawer-right" id="drawerRight" aria-label="Filters drawer">
  <h3>Filters</h3>
  <div id="filters" class="pad" style="display:flex;flex-direction:column;gap:16px">
       </div>
</aside>
<footer class="site-footer">
  <div class="wrap">
    <div class="sponsor-banner">
      <img src="assets/img/sponsor-1200x120.jpg" alt="Sponsor">
    </div>
  </div>
</footer>


<script>
/* ---- YATSTATS • Hamilton • build 5.0.3 ---- */

/* (Utils, drawers, theme, etc. are mostly unchanged) */
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQcWJM6Q6hTdFnES_G5LUy4teCS-sJ5HdAc9F5HSY8DGE9egdGy8yUAe2ShT3tFm-CwUuCYeAYy_YiW/pub?gid=2028135390&single=true&output=csv";
const $ = s => document.querySelector(s), $$ = s => Array.from(document.querySelectorAll(s));
const debounce = (fn, ms=180)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a),ms); }; };

/* drawers */
const openLeft = ()=>document.body.classList.add('drawer-left-open');
const openRight= ()=>document.body.classList.add('drawer-right-open');
const closeBoth = ()=>document.body.classList.remove('drawer-left-open','drawer-right-open');
$('#btnMenu')?.addEventListener('click', openLeft);
$('#openSearch')?.addEventListener('click', openLeft);
$('#openFilters')?.addEventListener('click', openRight);
$('.drawer-mask')?.addEventListener('click', closeBoth);


/* CSV loader */
async function loadCSV(url){
  const r = await fetch(url, {mode:'cors', cache:'no-store'});
  if(!r.ok) throw new Error(`HTTP ${r.status}`);
  const txt = await r.text();
  if(!txt.trim()) throw new Error('Empty CSV');
  const rows = txt.trim().split(/\r?\n/).map(line =>
    line.split(/,(?=(?:[^"]*"[^"]*")*[^"]*$)/).map(c=>c.replace(/^"|"$/g,''))
  );
  const header = rows.shift();
  const idx=n=>header.indexOf(n);
  return rows.map(r=>({
    id:r[idx('tbc_id')]||r[idx('id')],
    slug:r[idx('slug')],
    display_name:r[idx('display_name')],
    first:r[idx('first')], last:r[idx('last')],
    grad_class:r[idx('grad_class')], letter_years:r[idx('letter_years')],
    status:r[idx('status')], level:r[idx('level')], team:r[idx('team')],
    // NEW DATA: Add these columns to your Google Sheet for the new card design
    next_game_info: r[idx('next_game_info')] || 'TBD',
    last_3_games: r[idx('last_3_games')] || 'N/A',
    org:r[idx('org')], city_state:r[idx('city_state')],
    position:r[idx('position')], front_img:r[idx('front_img')], hs_img:r[idx('hs_img')]
  }));
}

/* (Sorting and helper functions are unchanged) */
function defaultSort(a,b){
  const orderStatus=['ACTIVE 2025','FREE AGENT','INJURED','ACTIVE 2024','RETIRED','SPONSOR'];
  const sA=orderStatus.indexOf((a.status||'').toUpperCase()), sB=orderStatus.indexOf((b.status||'').toUpperCase());
  if(sA!==sB) return sA-sB;
  const cA=+a.grad_class||0, cB=+b.grad_class||0; if(cA!==cB) return cA-cB;
  const lvlRank=v=>({'MLB':9,'TRIPLE-A':8,'DOUBLE-A':7,'HIGH-A':6,'LOW-A':5,'ROOKIE':4,'INDY':3,'INTERNATIONAL':2,'NCAA-D1':1,'NCAA-D2':1,'NCAA-D3':1,'NAIA':1,'JUCO':1}[String(v).toUpperCase()]||0);
  const L=lvlRank(a.level)-lvlRank(b.level); if(L!==0) return -L;
  const yrs=p=>String(p.letter_years||'').split(',').filter(Boolean).length;
  const vy=yrs(a)-yrs(b); if(vy!==0) return -vy;
  const lastA=(a.last||(a.display_name||'').split(' ').slice(-1)[0]||'').toLowerCase();
  const lastB=(b.last||(b.display_name||'').split(' ').slice(-1)[0]||'').toLowerCase();
  return lastA.localeCompare(lastB);
}
function slugOf(p){
  const s=(p.slug||'').trim();
  if(s) return s;
  const base=(p.display_name||`${p.first||''} ${p.last||''}`||'')
    .trim().toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
  return base;
}
function profileURL(p){
  const s=slugOf(p), id=(p.id||'').trim();
  if(s) return `profile.html?id=${encodeURIComponent(s)}`;
  if(id) return `profile.html?id=${encodeURIComponent(id)}`;
  return '#';
}
function nowImg(p){
  const slug = slugOf(p);
  const chain = [
    `assets/img/now-players/${slug}-now.jpg`,
    `assets/img/now-players/${slug}-now.png`,
    p.front_img,
    'assets/img/placeholder.jpg'
  ];
  return chain.find(Boolean);
}
function rosterDots(p){
  const yrs=String(p.letter_years||'').split(',').map(s=>s.trim()).filter(Boolean).map(y=>y.slice(-2));
  return yrs.map(y=>`<span class="dot" title="20${y}">${y}</span>`).join('');
}


/* CARD HTML FUNCTION - REDESIGNED */
function cardHTML(p){
  const name = p.display_name || (p.first && p.last ? `${p.first} ${p.last}` : '');
  const bg = nowImg(p);
  const klass = p.grad_class || '';
  const levelClass = (p.level || '').toLowerCase().replace(/\s+/g, '-').replace('-','');

  return `
  <article class="card" aria-label="${name}">
    <div class="card-inner">
      <div class="flip">
        <div class="face front">
          <div class="bg" style="background-image:url('${bg}')"></div>
          <div class="card-gradient"></div>
          <div class="card-content">
            <div class="player-details">
              <div class="name">${name}</div>
              <div class="team">${p.team || ''}</div>
            </div>
            <div class="game-stats">
              <div class="game-box">
                <div class="title">NEXT GAME</div>
                <div class="data">${p.next_game_info}</div>
              </div>
              <div class="game-box">
                <div class="title">LAST 3 GAMES</div>
                <div class="data">${p.last_3_games}</div>
              </div>
            </div>
            <div class="card-chips">
              ${p.level ? `<span class="chip level-${levelClass}">${p.level}</span>` : ''}
              ${p.status.includes('ACTIVE') ? `<span class="chip status-active">ACTIVE</span>` : ''}
              ${klass ? `<span class="chip">CLASS OF ${klass}</span>` : ''}
            </div>
            <div class="dots">${rosterDots(p)}</div>
          </div>
        </div>
        <div class="face back">
          <div class="back-head">
            <strong style="font:900 16px 'Bebas Neue'">${name}</strong>
            <a class="icon-btn" href="${profileURL(p)}" style="padding:8px 12px;border:1px solid #ddd;border-radius:10px;color:#111"><i class="ri-user-line"></i>&nbsp;Profile</a>
          </div>
          <div class="back-body">
            <p><strong>Level:</strong> ${p.level||'—'}</p>
            <p><strong>Status:</strong> ${p.status||'—'}</p>
            <p><strong>Class of:</strong> ${klass||'—'}</p>
            <p><strong>Team:</strong> ${p.team||'—'}</p>
          </div>
        </div>
      </div>
    </div>
  </article>`;
}

/* render */
function renderCards(list){
  const grid=document.getElementById('cardGrid'); if(!grid) return;
  grid.innerHTML=list.map(cardHTML).join('');
  grid.querySelectorAll('.card').forEach((el)=>{
    el.addEventListener('click', (e)=>{
      if(e.target.closest('a')) return;
      el.classList.toggle('is-flipped');
    });
  });
}

/* (The rest of the script: filters, search, boot logic is unchanged) */
function readFilters(){
  const name=($('#filterName')?.value||'').trim().toLowerCase();
  const levels=$$('#filterLevels input:checked').map(i=>i.value);
  const classes=$$('#classBox input:checked').map(i=>i.value);
  const years=$$('#rosterBox input:checked').map(i=>i.value);
  const status=$$('#filterStatus input:checked').map(i=>i.value);
  return {name,levels,classes,years,status};
}
function applyFilters(){
  if(!window.PLAYERS) return;
  const F=readFilters();
  const filtered=window.PLAYERS.filter(p=>{
    const nm=(p.display_name||(`${p.first} ${p.last}`)||'').toLowerCase();
    const nameOk=!F.name||nm.includes(F.name);
    const lvlOk=!F.levels.length||F.levels.includes(p.level);
    const classOk=!F.classes.length||F.classes.includes(String(p.grad_class));
    const yearOk=!F.years.length||String(p.letter_years||'').split(',').some(y=>F.years.includes(y.trim()));
    const statOk=!F.status.length||F.status.includes(p.status);
    return nameOk&&lvlOk&&classOk&&yearOk&&statOk;
  });
  renderCards(filtered);
  closeBoth();
}
function resetFilters(){
  $$('#filters input[type="checkbox"]').forEach(i=>i.checked=false);
  const filterNameInput = $('#filterName');
  if (filterNameInput) { filterNameInput.value = ''; }
  if(window.PLAYERS) renderCards(window.PLAYERS.slice().sort(defaultSort));
}
$('#filtersApply')?.addEventListener('click',applyFilters);
$('#filtersReset')?.addEventListener('click',resetFilters);
$('#filtersReset2')?.addEventListener('click',resetFilters);

(async ()=>{
  try{
    const data = await loadCSV(CSV_URL);
    if(!Array.isArray(data) || !data.length) throw new Error('No rows found in CSV.');
    window.PLAYERS = data.sort(defaultSort);
    renderCards(window.PLAYERS);
  }catch(err){
    console.error('CSV load failed', err);
  }
})();
</script>
</body>
</html>
