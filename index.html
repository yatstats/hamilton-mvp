<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>YAT?STATS • Hamilton – Where They YAT?</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
<style>
  :root{ --maroon:#7A0019; --ink:#111; --muted:#6b7280; --ring:#E3E6EA; }
  *{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .site-header{height:112px}
  @media (max-width:768px){.site-header{height:75px}}
  .nav-link{letter-spacing:.06em;font-weight:700}
  .nav-link.active{color:var(--maroon);position:relative}
  .nav-link.active::after{content:"";position:absolute;left:0;right:0;bottom:-2px;height:2px;background:var(--maroon)}
  #mobile-sidebar{transition:transform .25s ease}
  /* 3‑sided flip */
  .flip-card{perspective:1200px}
  .flip-card-inner{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .6s}
  .panel{position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden}
  .panel.side2{transform:rotateY(120deg)}
  .panel.side3{transform:rotateY(240deg)}
  .flip-rot-0  .flip-card-inner{transform:rotateY(0deg)}
  .flip-rot-120 .flip-card-inner{transform:rotateY(120deg)}
  .flip-rot-240 .flip-card-inner{transform:rotateY(240deg)}
  /* tags */
  .tag{padding:.25rem .5rem;border-radius:.375rem;font-weight:700;font-size:.70rem;color:#fff}
  .tag-mlb{background:var(--maroon)}
  .tag-aaa{background:#2563eb}
  .tag-aa{background:#3b82f6}
  .tag-a+{background:#4f46e5}
  .tag-a{background:#4338ca}
  .tag-ncaa{background:#166534}
  .tag-naia{background:#92400e}
  .tag-njcaa{background:#a16207}
  .tag-indy{background:#3f6212}
  .tag-kbo{background:#0ea5e9}
  /* footer */
  .footer-wrap{height:77px}
  .footer-img{height:100%;width:100%;object-fit:cover}
  /* image */
  .card-img{aspect-ratio:5/8;object-fit:cover;width:100%;border-radius:.5rem}
  .logo-yat{height:32px}
  @media (min-width:768px){ .logo-yat{height:48px} }
</style>
</head>
<body class="bg-neutral-100 text-[15px]">

<!-- Header -->
<header class="site-header fixed top-0 inset-x-0 z-40 bg-white border-b border-[var(--ring)]">
  <div class="h-full px-4 md:px-6 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <img src="https://i.postimg.cc/NjRf6nGF/hamilton-log-with-3-lines.png" alt="Hamilton High School • Active Alumni" class="h-9 md:h-12 w-auto" />
      <nav class="hidden md:flex items-center gap-6 ml-6">
        <a class="nav-link active uppercase text-[12px]" href="#">Where They YAT?</a>
        <a class="nav-link uppercase text-[12px] text-neutral-600 hover:text-[var(--maroon)]" href="#">Active Alumni News</a>
        <a class="nav-link uppercase text-[12px] text-neutral-600 hover:text-[var(--maroon)]" href="#">All-Time Huskies Roster</a>
        <a class="nav-link uppercase text-[12px] text-neutral-600 hover:text-[var(--maroon)]" href="#">YAT-A-BOY Marketplace</a>
        <a class="nav-link uppercase text-[12px] text-neutral-600 hover:text-[var(--maroon)]" href="#">PCDAction Partners</a>
        <a class="nav-link uppercase text-[12px] text-neutral-600 hover:text-[var(--maroon)]" href="#">Current HS Team</a>
        <a class="nav-link uppercase text-[12px] text-neutral-600 hover:text-[var(--maroon)]" href="#">Global School Search</a>
        <a class="nav-link uppercase text-[12px] text-neutral-600 hover:text-[var(--maroon)]" href="#">Register | Login</a>
      </nav>
    </div>
    <div class="flex items-center gap-4">
      <img src="https://i.postimg.cc/76srDfFT/yatstats-logo-stacked.png" alt="YAT?STATS" class="logo-yat w-auto" />
      <button id="hamburger" class="md:hidden p-2 rounded border border-[var(--ring)]" aria-label="Open menu">
        <svg width="20" height="20" fill="none" stroke="currentColor"><path stroke-width="2" d="M3 6h14M3 10h14M3 14h14"/></svg>
      </button>
    </div>
  </div>
</header>

<!-- Mobile drawer -->
<aside id="mobile-sidebar" class="fixed top-0 right-0 bottom-0 z-50 w-[80%] max-w-sm bg-white shadow-2xl translate-x-full md:hidden">
  <div class="pt-[75px] px-5 pb-6 space-y-6">
    <div class="relative">
      <input id="search-input-m" type="text" placeholder="Search by Player Name" class="w-full pl-10 pr-3 py-2 border border-[var(--ring)] rounded" />
    </div>
    <nav class="flex flex-col gap-4 text-right">
      <a class="nav-link active uppercase text-[14px]" href="#">Where They YAT?</a>
      <a class="nav-link uppercase text-[14px] text-neutral-600" href="#">Active Alumni News</a>
      <a class="nav-link uppercase text-[14px] text-neutral-600" href="#">All-Time Huskies Roster</a>
      <a class="nav-link uppercase text-[14px] text-neutral-600" href="#">YAT-A-BOY Marketplace</a>
      <a class="nav-link uppercase text-[14px] text-neutral-600" href="#">PCDAction Partners</a>
      <a class="nav-link uppercase text-[14px] text-neutral-600" href="#">Current HS Team</a>
      <a class="nav-link uppercase text-[14px] text-neutral-600" href="#">Global School Search</a>
      <a class="nav-link uppercase text-[14px] text-neutral-600" href="#">Register | Login</a>
    </nav>
  </div>
</aside>
<div id="sidebar-overlay" class="fixed inset-0 bg-black/30 hidden md:hidden"></div>

<!-- Main -->
<main class="pt-[75px] md:pt-[112px] pb-[77px]">
  <!-- Filters -->
  <section class="px-4 md:px-6 py-3 flex items-center gap-3 sticky top-[75px] md:top-[112px] bg-white/90 backdrop-blur z-30 border-b border-[var(--ring)]">
    <div class="relative flex-1">
      <input id="search-input" type="text" placeholder="Search by Player Name" class="w-full pl-10 pr-3 py-2 border border-[var(--ring)] rounded" />
    </div>
    <select id="grad-filter" class="px-3 py-2 border border-[var(--ring)] rounded text-sm">
      <option value="">Graduating Class</option>
    </select>
    <select id="level-filter" class="px-3 py-2 border border-[var(--ring)] rounded text-sm">
      <option value="">Current Level</option>
    </select>
  </section>

  <!-- Error / status -->
  <div id="status" class="px-4 md:px-6 pt-4 hidden">
    <div class="bg-amber-50 border border-amber-300 text-amber-800 rounded p-3 text-sm">
      Couldn’t load players. Showing nothing would be lame—refresh, or check your connection.
    </div>
  </div>

  <!-- Grid -->
  <section id="roster-grid" class="px-4 md:px-6 py-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></section>
</main>

<!-- Footer -->
<footer class="footer-wrap fixed bottom-0 inset-x-0 bg-white border-t border-[var(--ring)]">
  <img class="footer-img" src="https://i.postimg.cc/05DWb4Fj/bmx-banner.png" alt="Sponsor banner" />
</footer>

<script>
/* --------- CONFIG --------- */
var USE_CSV = false; // keep false so demo cards always show

/* --------- DEMO DATA (always available) --------- */
var demoPlayers = [
  {
    id:"bellinger",
    name:"Cody Bellinger",
    graduatingClass:2013,
    currentLevel:"MLB",
    position:"CF/1B",
    team:"New York Yankees",
    frontImg:"https://i.postimg.cc/Y2PVpqNK/new-york-yankees-outfielder-cody-bellinger.jpg",
    highSchoolImg:"https://i.postimg.cc/z3h5j6H9/Bellinger-Hamilton-HS.jpg",
    seasonStats:{ avg:"—", hr:"—", rbi:"—", ops:"—" },
    lastGame:{ line:"—" },
    nextGame:{ opponent:"—", time:"—" }
  },
  {
    id:"patrick-murphy",
    name:"Patrick Murphy",
    graduatingClass:2013,
    currentLevel:"KBO",
    position:"P",
    team:"KT Wiz Suwon",
    frontImg:"https://i.postimg.cc/gc32dtQG/MURPH.avif",
    highSchoolImg:"https://i.postimg.cc/pL6kR3Fq/21-Murphy-Back-page-00001.jpg",
    seasonStats:{ era:"—", so:"—", whip:"—" },
    lastGame:{ line:"—" },
    nextGame:{ opponent:"—", time:"—" }
  },
  {
    id:"dom-hamel",
    name:"Dom Hamel",
    graduatingClass:2017,
    currentLevel:"AAA",
    position:"P",
    team:"Syracuse Mets",
    frontImg:"https://i.postimg.cc/Vv9fR5nJ/dom.webp",
    highSchoolImg:"https://i.postimg.cc/85zK09qS/23-Hamel-Back-page-00001.jpg",
    seasonStats:{ era:"—", k9:"—", wl:"—" },
    lastGame:{ line:"—" },
    nextGame:{ opponent:"—", time:"—" }
  }
];
var players = demoPlayers.slice();

/* --------- CSV LOADING (opt‑in) --------- */
function parseCSV(text){
  var lines = text.replace(/\r/g,'').trim().split('\n');
  if (!lines.length) return [];
  var headers = lines[0].split(',').map(function(h){return h.trim();});
  var out = [];
  for (var i=1;i<lines.length;i++){
    var cols = lines[i].split(',');
    if(!cols.join('').trim()) continue;
    var o = {};
    for (var j=0;j<headers.length;j++){
      o[headers[j]] = (cols[j]||'').trim();
    }
    out.push(o);
  }
  return out;
}
function csvToPlayer(r){
  function g(k){ return r[k] || ''; }
  var isP = /p(itcher)?/i.test(g('position'));
  var seasonStats = isP
    ? { era:g('statERA')||'—', so:g('statSO')||'—', whip:g('statWHIP')||'—', wl:g('statWL')||undefined }
    : { avg:g('statAVG')||'—', hr:g('statHR')||'—', rbi:g('statRBI')||'—', ops:g('statOPS')||'—' };
  return {
    id: g('id') || g('name').toLowerCase().replace(/\s+/g,'-'),
    name: g('name') || 'Unknown',
    graduatingClass: Number(g('graduatingClass')) || '',
    currentLevel: g('currentLevel') || '',
    position: g('position') || '',
    team: g('team') || '',
    frontImg: g('frontImg') || '',
    highSchoolImg: g('highSchoolImg') || '',
    seasonStats: seasonStats,
    lastGame: { line: g('lastLine') || '—' },
    nextGame: { opponent: g('nextOpponent') || '—', time: g('nextTime') || '—' }
  };
}
function tryLoadCSV(cb){
  if(!USE_CSV){ cb(); return; }
  var url = 'players.csv?v=' + Date.now();
  fetch(url, {cache:'no-store'}).then(function(res){
    if(!res.ok) throw new Error('CSV not found');
    return res.text();
  }).then(function(text){
    var rows = parseCSV(text);
    if(rows.length){ players = rows.map(csvToPlayer); }
    cb();
  }).catch(function(){
    // keep demo players
    cb();
  });
}

/* --------- UI HELPERS --------- */
function levelTag(level){
  var key = String(level||'').toLowerCase();
  var map = { mlb:'tag-mlb', aaa:'tag-aaa', aa:'tag-aa', 'a+':'tag-a+', a:'tag-a', ncaa:'tag-ncaa', njcaa:'tag-njcaa', naia:'tag-naia', indy:'tag-indy', kbo:'tag-kbo' };
  return map[key] || 'tag-mlb';
}
function safeImg(src,alt){ return 'src="'+src+'" alt="'+alt+'" loading="lazy" decoding="async"'; }

function makeCard(p){
  var lvl = levelTag(p.currentLevel);
  var isPitch = /\bp\b|pitch/i.test(p.position||'');
  var season = isPitch
    ? '<div class="grid grid-cols-3 gap-2">'
        + statBox('ERA', (p.seasonStats && p.seasonStats.era) || '—')
        + statBox('SO/K9', (p.seasonStats && (p.seasonStats.so || p.seasonStats.k9)) || '—')
        + statBox('WHIP/W‑L', (p.seasonStats && (p.seasonStats.whip || p.seasonStats.wl)) || '—')
      + '</div>'
    : '<div class="grid grid-cols-4 gap-2">'
        + statBox('AVG', (p.seasonStats && p.seasonStats.avg) || '—')
        + statBox('HR', (p.seasonStats && p.seasonStats.hr) || '—')
        + statBox('RBI', (p.seasonStats && p.seasonStats.rbi) || '—')
        + statBox('OPS', (p.seasonStats && p.seasonStats.ops) || '—')
      + '</div>';

  var lastLine = (p.lastGame && p.lastGame.line) || '—';
  var nextOpp  = (p.nextGame && p.nextGame.opponent) || '—';
  var nextTime = (p.nextGame && p.nextGame.time) || '—';

  return ''+
  '<article tabindex="0" class="flip-card flip-rot-0 bg-white border border-[var(--ring)] rounded-lg shadow-sm overflow-hidden">'+
    '<div class="flip-card-inner">'+

      '<div class="panel side1">'+
        '<div class="relative p-3">'+
          '<img class="card-img" '+safeImg(p.frontImg || 'https://i.postimg.cc/76srDfFT/yatstats-logo-stacked.png', p.name)+' />'+
          '<span class="tag '+lvl+' absolute top-4 right-4">'+(p.currentLevel||'')+'</span>'+
          '<div class="absolute inset-x-3 bottom-3 rounded-md bg-gradient-to-t from-black/70 to-transparent p-3 text-white">'+
            '<div class="text-lg font-extrabold leading-tight">'+p.name+'</div>'+
            '<div class="text-xs opacity-90">'+(p.team||'')+(p.team&&p.position?' • ':' ')+(p.position||'')+'</div>'+
            '<div class="mt-2 text-[11px] opacity-90">'+
              '<div><strong>Last:</strong> '+lastLine+'</div>'+
              '<div><strong>Next:</strong> '+nextOpp+' <span class="opacity-80">• '+nextTime+'</span></div>'+
            '</div>'+
          '</div>'+
        '</div>'+
      '</div>'+

      '<div class="panel side2 bg-white p-4">'+
        '<div class="flex items-start justify-between mb-3">'+
          '<div>'+
            '<div class="text-base font-bold">'+p.name+'</div>'+
            '<div class="text-xs text-neutral-500">'+(p.team||'')+(p.team&&p.position?' • ':' ')+(p.position||'')+'</div>'+
          '</div>'+
          '<span class="tag '+lvl+'">'+(p.currentLevel||'')+'</span>'+
        '</div>'+
        season+
        '<div class="mt-3 text-xs text-neutral-500">Hamilton Class of '+(p.graduatingClass||'—')+'</div>'+
      '</div>'+

      '<div class="panel side3 bg-white">'+
        (p.highSchoolImg
          ? '<img class="w-full h-full object-cover" style="aspect-ratio:5/8" '+safeImg(p.highSchoolImg, p.name+' – Hamilton HS')+' />'
          : '<div class="h-full flex items-center justify-center text-neutral-400">No HS image yet</div>'
        )+
      '</div>'+

    '</div>'+
  '</article>';
}
function statBox(label,val){
  return '<div class="bg-neutral-100 rounded p-2 text-center">'
        +'<div class="text-xs text-neutral-500">'+label+'</div>'
        +'<div class="font-semibold">'+val+'</div>'
      +'</div>';
}

/* --------- RENDER & FILTERS --------- */
function render(list){
  var grid = document.getElementById('roster-grid');
  if(!list || !list.length){
    document.getElementById('status').classList.remove('hidden');
    grid.innerHTML = '';
    return;
  }
  document.getElementById('status').classList.add('hidden');
  var html = '';
  for (var i=0;i<list.length;i++) html += makeCard(list[i]);
  grid.innerHTML = html;
}
function populateFilters(){
  var classes = []; var levels = [];
  for (var i=0;i<players.length;i++){
    var c = players[i].graduatingClass;
    var l = players[i].currentLevel;
    if(c && classes.indexOf(c)===-1) classes.push(c);
    if(l && levels.indexOf(l)===-1) levels.push(l);
  }
  classes.sort(function(a,b){return b-a;});
  var gf = document.getElementById('grad-filter');
  for (var x=0;x<classes.length;x++){ var o=document.createElement('option'); o.value=classes[x]; o.textContent=classes[x]; gf.appendChild(o); }
  var lf = document.getElementById('level-filter');
  for (var y=0;y<levels.length;y++){ var p=document.createElement('option'); p.value=levels[y]; p.textContent=levels[y]; lf.appendChild(p); }
}
function applyFilters(){
  var q = (document.getElementById('search-input').value||'').toLowerCase();
  var g = document.getElementById('grad-filter').value;
  var l = document.getElementById('level-filter').value;
  var out = [];
  for (var i=0;i<players.length;i++){
    var p = players[i];
    if(q && p.name.toLowerCase().indexOf(q)===-1) continue;
    if(g && String(p.graduatingClass)!==g) continue;
    if(l && p.currentLevel!==l) continue;
    out.push(p);
  }
  render(out);
}

/* --------- Flip behaviour --------- */
function rotateCard(card, toRight){
  if(card.classList.contains('flip-rot-0')){
    card.classList.remove('flip-rot-0'); card.classList.add(toRight?'flip-rot-120':'flip-rot-240');
  }else if(card.classList.contains('flip-rot-120')){
    card.classList.remove('flip-rot-120'); card.classList.add(toRight?'flip-rot-240':'flip-rot-0');
  }else{
    card.classList.remove('flip-rot-240'); card.classList.add(toRight?'flip-rot-0':'flip-rot-120');
  }
}
document.addEventListener('click', function(e){
  var card = e.target.closest ? e.target.closest('.flip-card') : null;
  if(!card) return;
  var rect = card.getBoundingClientRect();
  rotateCard(card, (e.clientX - rect.left) > rect.width/2);
});
document.addEventListener('keydown', function(e){
  if(e.key!=='ArrowLeft' && e.key!=='ArrowRight') return;
  var el = document.activeElement;
  var card = el && el.closest ? el.closest('.flip-card') : null;
  if(!card) return;
  rotateCard(card, e.key==='ArrowRight');
});

/* --------- Drawer --------- */
var hamb = document.getElementById('hamburger');
var drawer = document.getElementById('mobile-sidebar');
var overlay = document.getElementById('sidebar-overlay');
function openDrawer(){ drawer.classList.remove('translate-x-full'); overlay.classList.remove('hidden'); }
function closeDrawer(){ drawer.classList.add('translate-x-full'); overlay.classList.add('hidden'); }
if(hamb){ hamb.addEventListener('click', function(){ drawer.classList.contains('translate-x-full') ? openDrawer() : closeDrawer(); }); }
if(overlay){ overlay.addEventListener('click', closeDrawer); }

/* --------- Boot (DOMContentLoaded = faster + safer) --------- */
document.addEventListener('DOMContentLoaded', function(){
  tryLoadCSV(function(){
    populateFilters();
    render(players);
    var ids = ['search-input','grad-filter','level-filter'];
    for (var i=0;i<ids.length;i++){
      var el = document.getElementById(ids[i]);
      if(!el) continue;
      el.addEventListener('input', applyFilters);
      el.addEventListener('change', applyFilters);
    }
  });
});
</script>
</body>
</html>