<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>YAT?STATS — WHERE THEY YAT?</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#000; --fg:#fff; --muted:#cbd5e1; --ring:#1f2530; --heroH:54px; --crumbH:22px; --edge:14px; }
    [data-theme="light"]{ --bg:#fff; --fg:#000; --muted:#374151; --ring:#d1d5db; }
    html,body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial}
    /* Sticky header mount */
    #headerMount{position:relative;z-index:60}

    /* HERO (separate from header) — same height as top row */
    .hero{position:sticky;top:calc(54px + 78px);z-index:50;background:var(--bg);border-bottom:1px solid var(--ring)}
    .hero-inner{display:grid;grid-template-columns:1fr auto;align-items:center;gap:10px;height:var(--heroH);padding:0 var(--edge)}
    .pair{display:inline-flex;align-items:baseline;white-space:nowrap}
    .slim{font:400 12px/1 "Oswald",sans-serif;color:var(--muted);margin-right:6px}
    .strong{font:400 16px/1 "Bebas Neue",sans-serif;color:var(--fg)}
    .actions{display:flex;align-items:center;gap:6px}
    .hbtn{width:32px;height:32px;border-radius:8px;border:1px solid var(--ring);background:transparent;color:var(--fg);display:grid;place-items:center;cursor:pointer}
    .hbtn:hover{background:rgba(255,255,255,.08)}
    .hbtn svg{width:18px;height:18px}
    .crumbs{height:var(--crumbH);display:flex;align-items:center;padding:0 var(--edge);color:var(--muted);font:300 11px/1 "Oswald",sans-serif;letter-spacing:.02em}

    /* Grid */
    .wrap{padding:12px var(--edge) 40px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}

    /* Splash overlay */
    .splash{position:fixed;inset:0;background:#000;display:grid;grid-template-rows:1fr auto;z-index:1000;transition:opacity .4s ease}
    .splash.hide{opacity:0;pointer-events:none}
    .splash-center{display:grid;place-items:center}
    .splash-logo{width:min(72vw,420px);filter:drop-shadow(0 0 24px rgba(255,255,255,.18))}
    .splash-bottom{display:flex;align-items:center;justify-content:center;gap:28px;margin-bottom:24px}
    .sp-h{height:44px}
    .sp-bmx{height:44px}
    .presented{font:400 12px/1 "Oswald",sans-serif;color:#cbd5e1;margin-top:4px;text-align:center}
  </style>
</head>
<body>

  <!-- Splash -->
  <div id="splash" class="splash">
    <div class="splash-center">
      <!-- YAT?STATS official logo (same asset you use in header) -->
      <img class="splash-logo" src="https://i.postimg.cc/C5mwXpQy/35878-20250830-222027-0000.png" alt="YAT?STATS">
    </div>
    <div>
      <div class="splash-bottom">
        <div style="text-align:center">
          <img class="sp-h" src="https://i.postimg.cc/pVm0vHdX/hamilton-logo-tight-transparent-background.png" alt="Hamilton">
        </div>
        <div style="width:2px;height:32px;background:#333"></div>
        <div style="text-align:center">
          <img class="sp-bmx" src="https://i.postimg.cc/R0GsT1Mg/sponsor-logo.png" alt="USA BMX">
          <div class="presented">presented by USA BMX</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Global header gets injected here -->
  <div id="headerMount"></div>

  <!-- HERO -->
  <section class="hero" aria-label="Hero row">
    <div class="hero-inner">
      <div class="tagline">
        <span class="pair"><span class="slim">WHERE THEY</span><span class="strong">YAT?</span></span>
        <span class="pair" style="margin-left:14px"><span class="slim">FLIP FOR</span><span class="strong">STATS!</span></span>
      </div>
      <div class="actions">
        <button class="hbtn" id="heroSearch" aria-label="Search">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"/></svg>
        </button>
        <button class="hbtn" id="heroFilter" aria-label="Filters">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M3 5h18v2H3zm4 6h10v2H7zm3 6h4v2h-4z"/></svg>
        </button>
        <button class="hbtn" id="heroReset" aria-label="Reset">
          <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 5V2L8 6l4 4V7a5 5 0 11-5 5H5a7 7 0 107-7z"/></svg>
        </button>
      </div>
    </div>
    <div class="crumbs" id="breadcrumbs">Home ▸ Where They YAT?</div>
  </section>

  <!-- Cards grid -->
  <main class="wrap">
    <div id="grid" class="grid" aria-live="polite"></div>
  </main>

  <script>
    async function mountPartial(url, mountSelector){
      const html = await fetch(url, {cache:'no-cache'}).then(r=>r.text());
      const mount = document.querySelector(mountSelector);
      mount.innerHTML = html;
      // execute inline scripts
      mount.querySelectorAll('script').forEach(old=>{
        const s=document.createElement('script');
        if(old.type) s.type=old.type;
        s.textContent = old.textContent;
        document.body.appendChild(s);
        old.remove();
      });
    }

    (async function(){
      // 1) Header
      await mountPartial('header.html','#headerMount');
      // 2) Cards engine (CSV)
      const tmp = document.createElement('div'); document.body.appendChild(tmp);
      tmp.innerHTML = await fetch('cards.html',{cache:'no-cache'}).then(r=>r.text());
      tmp.querySelectorAll('script').forEach(old=>{ const s=document.createElement('script'); s.textContent=old.textContent; document.body.appendChild(s); old.remove(); });

      // 3) Wire hero buttons after header is present
      const byId=id=>document.getElementById(id);
      byId('heroSearch')?.addEventListener('click', ()=> byId('openLeft')?.click());
      byId('heroFilter')?.addEventListener('click', ()=> byId('openFiltersFromHero')?.click());
      byId('heroReset') ?.addEventListener('click', ()=> window.YAT?.resetAll?.());

      // 4) Hide splash after players are ready (or timeout fallback)
      const hideSplash = ()=> document.getElementById('splash')?.classList.add('hide');
      document.addEventListener('yat:players-ready', hideSplash, {once:true});
      setTimeout(hideSplash, 4000); // safety fade even if network is slow
    })();
  </script>
</body>
</html>