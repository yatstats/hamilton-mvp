<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Where They YAT? • Hamilton HS Active Alumni</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b0b0b; --fg:#f6f7f9; --muted:#c7ccd1; --line:#1f2326;
  --hamSmall:13px; --hamBig:20px; --hamBigger:24px;
  --heroH:56px; --headerTopH:44px; --headerMidH:78px;
  --padX:16px; --icon:22px; --shadow:0 6px 24px rgba(0,0,0,.35);
}
@font-face{ font-family:"Indigo"; src:url("assets/fonts/Indigo.otf") format("opentype"); font-display:swap }
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font-family:Oswald,system-ui}

/* Header */
.header{position:sticky;top:0;z-index:50;background:var(--bg)}
.row-top{height:var(--headerTopH);display:grid;grid-template-columns:1fr auto auto;align-items:center;padding:0 var(--padX);border-bottom:1px solid var(--line)}
.left-icons{display:flex;gap:10px;align-items:center}
.iconbtn{width:38px;height:30px;border:1px solid var(--line);border-radius:9px;display:grid;place-items:center;cursor:pointer;background:transparent}
.iconbtn svg{width:var(--icon);height:var(--icon);color:var(--fg)}
.nav-center{display:flex;gap:18px;justify-content:center;align-items:center;font:300 var(--hamSmall)/1 Oswald;color:var(--muted);white-space:nowrap}
.nav-item{display:inline-flex;gap:6px;align-items:baseline}
.nav-item .bold{font:400 calc(var(--hamSmall)*1.1)/1 "Indigo","Bebas Neue";letter-spacing:.01em;color:var(--fg)}
@media (max-width:980px){ .nav-center{display:none} }
.right-wordmark{justify-self:end}.wordmark{height:28px;display:block}
.row-mid{height:var(--headerMidH);display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:14px;padding:0 var(--padX);border-bottom:1px solid var(--line)}
.ham-logo{height:56px}
.schoolblock{line-height:1}
.small{font:300 var(--hamSmall)/1 Oswald;letter-spacing:.02em;color:var(--muted)}
.big{font:400 var(--hamBig)/.95 "Bebas Neue"}
.bigger{font:400 var(--hamBigger)/.95 "Bebas Neue";margin-top:-6px}
.crumbs{font:300 calc(var(--hamSmall)*.5)/1 Oswald;letter-spacing:.02em;color:var(--muted);text-transform:uppercase;justify-self:end;white-space:nowrap}
@media (max-width:640px){ .big{font-size:18px}.bigger{font-size:22px;margin-top:-5px}.ham-logo{height:48px} }

/* Hero */
.hero{height:var(--heroH);display:grid;grid-template-columns:1fr auto;align-items:center;padding:0 var(--padX);border-bottom:1px solid var(--line)}
.tagline{display:flex;gap:34px;align-items:baseline;white-space:nowrap;overflow:hidden}
.tag-seg{display:inline-flex;gap:6px;align-items:baseline}
.tag-skinny{font:300 var(--hamBig)/1 Oswald;color:var(--muted);letter-spacing:.02em}
.tag-bold{font:400 var(--hamBig)/1 "Indigo","Bebas Neue";letter-spacing:.01em}
.hero-tools{display:flex;gap:10px}
.hero-tools .iconbtn{height:36px;width:42px}

/* Drawers */
.drawer{position:fixed;top:0;bottom:0;width:320px;background:#111;border-left:1px solid var(--line);box-shadow:var(--shadow);z-index:70;transform:translateX(100%);transition:transform .22s ease}
.drawer.left{left:0;width:340px;border-left:none;border-right:1px solid var(--line);transform:translateX(-100%)}
.drawer.open.left{transform:translateX(0)} .drawer.open.right{transform:translateX(0)}
.drawer .hd{padding:14px var(--padX);font:400 22px "Bebas Neue";border-bottom:1px solid var(--line)}
.drawer .body{padding:12px var(--padX);display:grid;gap:12px}
.field{display:grid;gap:6px}
.field label{font:600 12px Oswald;color:var(--muted);text-transform:uppercase;letter-spacing:.08em}
.field input,.field select{background:#0f1113;color:var(--fg);border:1px solid #2a2f34;border-radius:10px;padding:10px 12px;font:400 14px/1.2 system-ui}
.actions{display:flex;gap:8px}
.btn{padding:10px 12px;border-radius:10px;border:1px solid #2a2f34;background:#181b1f;color:#fff;cursor:pointer}
.btn.primary{background:#fff;color:#000;border-color:#fff}

/* Grid 5→1 & 5:7 cards */
.wrap{padding:18px var(--padX) 80px}
.grid{display:grid;grid-template-columns:repeat(5,1fr);gap:16px}
@media (max-width:1600px){ .grid{grid-template-columns:repeat(4,1fr)} }
@media (max-width:1200px){ .grid{grid-template-columns:repeat(3,1fr)} }
@media (max-width:900px){  .grid{grid-template-columns:repeat(2,1fr)} }
@media (max-width:560px){  .grid{grid-template-columns:repeat(1,1fr)} }
.flip-card{position:relative}
.card{position:relative;background:#0e0f12;border:1px solid #1c1f23;border-radius:18px;overflow:hidden;aspect-ratio:5/7;box-shadow:var(--shadow)}
.flip{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .6s cubic-bezier(.2,.7,.2,1)}
.card.back .flip{transform:rotateY(180deg)}
.face{position:absolute;inset:0;backface-visibility:hidden;-webkit-backface-visibility:hidden}
/* front */
.bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;background:#111}
.grad{position:absolute;left:0;right:0;bottom:0;height:66%;background:linear-gradient(to top,rgba(0,0,0,.96),rgba(0,0,0,.1))}
.meta{position:absolute;left:14px;right:14px;bottom:12px;z-index:2;color:#fff;display:grid;grid-template-columns:1fr auto;gap:10px;align-items:end}
.player-name{font:400 28px/1 "Indigo","Bebas Neue";letter-spacing:.01em}
.team-line{color:#d7dbe0;font:300 13px/1.2 Oswald;margin-top:6px}
.chips{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.18);font:800 12px/1 Oswald;letter-spacing:.06em;text-transform:uppercase}
.chip.level{background:#19324d;border-color:#274760}
.chip.status{background:#0b3b2f;border-color:#16624f}
.chip.class{background:#333;border-color:#444}
.meta-right{display:flex;flex-direction:column;align-items:end;gap:10px;text-align:right;min-width:180px}
.pill{padding:6px 12px;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.22);font:900 12px/1 Oswald;letter-spacing:.12em}
.kvlist{font:300 13px/1.25 Oswald;color:#e8eef3}.kvlist .muted{opacity:.75}
/* dots */
.dots{position:absolute;right:14px;bottom:12px;display:flex;gap:6px;z-index:2}
.dot{width:28px;height:28px;border-radius:999px;background:#f3f4f6;color:#111;display:grid;place-items:center;font:900 12px/1 Oswald;border:1px solid rgba(0,0,0,.25)}
/* back */
.back{transform:rotateY(180deg);background:#fff;color:#111;display:grid;grid-template-rows:auto 1fr}
.back-head{padding:10px 12px;border-bottom:1px solid #eaeaea;display:flex;justify-content:space-between;align-items:center}
.back-body{padding:12px;overflow:auto}
.linkbtn{display:inline-block;padding:8px 12px;border-radius:10px;background:#111;color:#fff;font:800 13px/1 Oswald}
/* flip target */
.hit{position:absolute;inset:0;z-index:3;background:transparent;border:0;cursor:pointer}
/* stamp */
.data-stamp{margin:10px var(--padX) 80px;font:300 12px/1.4 Oswald;color:#9aa3ad}
</style>
</head>
<body>
<header class="header">
  <div class="row-top">
    <div class="left-icons">
      <button class="iconbtn" id="btnMenu" title="Menu"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 6h18M3 12h18M3 18h18" stroke-width="2" stroke-linecap="round"/></svg></button>
      <button class="iconbtn" id="btnAccount" title="Account"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm7 9a7 7 0 0 0-14 0" stroke-width="2" stroke-linecap="round"/></svg></button>
      <button class="iconbtn" id="btnTheme" title="Theme"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke-width="2" stroke-linecap="round"/></svg></button>
    </div>
    <nav class="nav-center" aria-label="Top Navigation">
      <a class="nav-item" href="index.html"><span>WHERE THEY</span><span class="bold">YAT?</span></a>
      <a class="nav-item" href="#"><span>ACTIVE ALUMNI</span><span class="bold">NEWS</span></a>
      <a class="nav-item" href="#"><span>NEXT-LEVEL</span><span class="bold">ALL-TIME LIST</span></a>
      <a class="nav-item" href="#"><span>NIL & YAT-A-BOY</span><span class="bold">MARKETPLACE</span></a>
      <a class="nav-item" href="#"><span>THE</span><span class="bold">CURRENT TEAM</span></a>
      <a class="nav-item" href="#"><span>PCD ACTION</span><span class="bold">PARTNER PROGRAM</span></a>
      <a class="nav-item" href="#"><span></span><span class="bold">FAQ’S</span></a>
    </nav>
    <div class="right-wordmark"><img class="wordmark" src="assets/img/yatstats-logo.png" alt="YAT?STATS"></div>
  </div>
  <div class="row-mid">
    <img class="ham-logo" src="assets/img/hamilton-logo.png" alt="Hamilton H">
    <div class="schoolblock">
      <div class="small">CHANDLER, AZ</div>
      <div class="big">HAMILTON HIGH SCHOOL</div>
      <div class="bigger">ACTIVE ALUMNI</div>
    </div>
    <div class="crumbs">HOME ▸ WHERE THEY YAT?</div>
  </div>
</header>

<section class="hero">
  <div class="tagline">
    <div class="tag-seg"><span class="tag-skinny">WHERE THEY</span><span class="tag-bold">YAT?</span></div>
    <div class="tag-seg"><span class="tag-skinny">FLIP FOR</span><span class="tag-bold">STATS!</span></div>
  </div>
  <div class="hero-tools">
    <button class="iconbtn" id="openSearch" title="Search"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="11" cy="11" r="7" stroke-width="2"/><path d="m21 21-4.3-4.3" stroke-width="2" stroke-linecap="round"/></svg></button>
    <button class="iconbtn" id="openFilter" title="Filter"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 6h18M6 12h12M10 18h4" stroke-width="2" stroke-linecap="round"/></svg></button>
    <button class="iconbtn" id="resetFilters" title="Reset"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 12a9 9 0 1 1 3 6" stroke-width="2"/><path d="M3 3v6h6" stroke-width="2" stroke-linecap="round"/></svg></button>
  </div>
</section>

<aside class="drawer left" id="drawerLeft" aria-hidden="true">
  <div class="hd">PLAYER PROFILE SEARCH</div>
  <div class="body">
    <div class="field"><label for="searchName">Name</label><input id="searchName" type="text" placeholder="Type to search…"></div>
    <div class="actions"><button class="btn primary" id="goSearch">Search</button><button class="btn" id="closeLeft">Close</button></div>
    <hr style="border-color:#1d2125">
    <div class="field"><label>Navigation</label></div>
    <a class="nav-item" href="index.html"><span>WHERE THEY</span><span class="bold">YAT?</span></a>
    <a class="nav-item" href="#"><span>ACTIVE ALUMNI</span><span class="bold">NEWS</span></a>
    <a class="nav-item" href="#"><span>NEXT-LEVEL</span><span class="bold">ALL-TIME LIST</span></a>
    <a class="nav-item" href="#"><span>NIL & YAT-A-BOY</span><span class="bold">MARKETPLACE</span></a>
    <a class="nav-item" href="#"><span>THE</span><span class="bold">CURRENT TEAM</span></a>
    <a class="nav-item" href="#"><span>PCD ACTION</span><span class="bold">PARTNER PROGRAM</span></a>
    <a class="nav-item" href="#"><span></span><span class="bold">FAQ’S</span></a>
  </div>
</aside>

<aside class="drawer right" id="drawerRight" aria-hidden="true" style="right:0">
  <div class="hd">Filters</div>
  <div class="body">
    <div class="field"><label>By Player Name</label><input id="fName" type="text" placeholder="Type name…"></div>
    <div class="field"><label>By Level</label>
      <select id="fLevel" multiple size="7">
        <option>MLB</option><option>TRIPLE-A</option><option>DOUBLE-A</option>
        <option>HIGH-A</option><option>LOW-A</option><option>ROOKIE</option>
        <option>INDY</option><option>INTERNATIONAL</option>
        <option>NCAA-D1</option><option>NCAA-D2</option><option>NCAA-D3</option>
        <option>NAIA</option><option>JUCO</option>
      </select>
    </div>
    <div class="field"><label>By Grad Class</label><select id="fGrad" multiple size="8"></select></div>
    <div class="field"><label>By Roster Year</label><select id="fRoster" multiple size="8"></select></div>
    <div class="field"><label>By Status</label>
      <select id="fStatus" multiple size="6">
        <option>ACTIVE 2025</option><option>FREE AGENT</option><option>INJURED</option>
        <option>ACTIVE 2024</option><option>RETIRED</option><option>SPONSOR</option>
      </select>
    </div>
    <div class="actions">
      <button class="btn primary" id="applyFilters">Apply</button>
      <button class="btn" id="clearFilters">Reset</button>
      <button class="btn" id="closeRight">Close</button>
    </div>
  </div>
</aside>

<aside class="drawer right" id="drawerAccount" aria-hidden="true" style="right:0">
  <div class="hd">Sign up | Login</div>
  <div class="body">
    <p style="color:#9aa2aa">Global platform searches:</p>
    <a class="nav-item" href="#"><span>GLOBAL</span><span class="bold">SCHOOL SEARCH</span></a>
    <a class="nav-item" href="#"><span>GLOBAL</span><span class="bold">ACTIVE PLAYER</span></a>
  </div>
</aside>

<main class="wrap">
  <div id="grid" class="grid" aria-live="polite"></div>
  <div id="dataStamp" class="data-stamp" aria-live="polite"></div>
</main>

<nav class="tabbar" style="position:fixed;left:0;right:0;bottom:0;height:52px;background:#0e0f12;border-top:1px solid var(--line);display:flex;justify-content:space-around;align-items:center;z-index:60" aria-label="Sections">
  <a style="color:#fff;text-decoration:none;font:700 13px Oswald">BIO</a>
  <a style="color:#9aa3ad;text-decoration:none;font:700 13px Oswald">NEWS</a>
  <a style="color:#9aa3ad;text-decoration:none;font:700 13px Oswald">STATS</a>
  <a style="color:#9aa3ad;text-decoration:none;font:700 13px Oswald">SOCIAL</a>
  <a style="color:#9aa3ad;text-decoration:none;font:700 13px Oswald">NIL SCORE</a>
  <a style="color:#9aa3ad;text-decoration:none;font:700 13px Oswald">VIDEO</a>
  <a style="color:#9aa3ad;text-decoration:none;font:700 13px Oswald">PICS</a>
</nav>

<script>
const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vSB4q8nvjYfftVeWKkFNz42uDDWSuDXikimMa-a25WQk_XX-imZbiUd8q5Cj94rjZJjaabw5DGMvJFd/pub?gid=82179728&single=true&output=csv";
const $=(s,r=document)=>r.querySelector(s); const $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
const tidy=s=>s?String(s).trim():"";

/* CSV parser */
function parseCSV(text){
  const rows=[]; let i=0, cur="", inQ=false, row=[];
  while(i<text.length){
    const c=text[i];
    if(c==='\"'){ if(inQ && text[i+1]==='\"'){ cur+='\"'; i++; } else { inQ=!inQ; } }
    else if(c===',' && !inQ){ row.push(cur); cur=""; }
    else if((c==='\n'||c==='\r') && !inQ){
      if(cur.length||row.length){ row.push(cur); rows.push(row); row=[]; cur=""; }
      if(c==='\r'&&text[i+1]==='\n') i++;
    } else cur+=c;
    i++;
  }
  if(cur.length||row.length){ row.push(cur); rows.push(row); }
  const header = rows.shift().map(h=>h.toLowerCase().replace(/\s+/g,'_'));
  return rows.map(r=>{ const o={}; header.forEach((h,idx)=>o[h]=r[idx]??""); return o; });
}

/* dots, blocks, sort (same as before) */
function toDots(s){ return tidy(s).split(/[,;/\s]+/).filter(Boolean).map(y=>y.length===4?y.slice(-2):y.padStart(2,'0')).slice(-4).map(y=>`<span class="dot" title="${y}">${y}</span>`).join(""); }
function nextGameBlock(p){ const d=tidy(p.next_game_date||p.next_game||""); const o=tidy(p.next_game_opponent||p.ng_opponent||""); if(!d&&!o) return ""; const l2=o? (o.toUpperCase().startsWith("@")||o.toUpperCase().startsWith("VS")?o.toUpperCase():"@ "+o.toUpperCase()):"—"; return `<span class="pill">NEXT GAME</span><div class="kvlist"><div>${d||"—"}</div><div class="muted">${l2}</div></div>`; }
function last3Block(p){ const a=[tidy(p.last3_1),tidy(p.last3_2),tidy(p.last3_3)].filter(Boolean); if(!a.length) return ""; return `<span class="pill" style="margin-top:6px">LAST 3 GAMES</span><div class="kvlist">${a.map(s=>`<div class="muted">${s}</div>`).join("")}</div>`; }
const STATUS_ORDER=["ACTIVE 2025","FREE AGENT","INJURED","ACTIVE 2024","RETIRED","SPONSOR"];
const LEVEL_RANK={"MLB":12,"TRIPLE-A":11,"AAA":11,"DOUBLE-A":10,"AA":10,"HIGH-A":9,"A+":9,"LOW-A":8,"A":8,"ROOKIE":7,"INDY":6,"INTERNATIONAL":5,"NCAA-D1":4,"NCAA-D2":3,"NCAA-D3":2,"NAIA":1,"JUCO":0};
function countVarsityYears(s){return tidy(s).split(/[,;/\s]+/).filter(Boolean).length;}
function defaultSort(rows,{includeRetired=false}={}){ const cleaned=rows.filter(p=>p&&(p.tbc_id||p.slug||p.display_name)); const filtered=includeRetired?cleaned:cleaned.filter(p=>String(p.status||"").toUpperCase()!=="RETIRED"); const rS=s=>{const i=STATUS_ORDER.indexOf(String(s||"").toUpperCase());return i===-1?99:i;}; const rL=l=>LEVEL_RANK[String(l||"").toUpperCase()]??-1; filtered.sort((a,b)=>{const s=rS(a.status)-rS(b.status); if(s) return s; const gA=parseInt(a.grad_class||"9999",10),gB=parseInt(b.grad_class||"9999",10); if(gA!==gB) return gA-gB; const l=rL(a.level)-rL(b.level); if(l) return -l; const v=countVarsityYears(a.letter_years)-countVarsityYears(b.letter_years); if(v) return -v; return String(a.last||"").localeCompare(String(b.last||""));}); return filtered; }

/* NEW: profile URL builder (slug first, fallback id) */
function profileURL(p){
  const slug = tidy(p.slug);
  const id   = tidy(p.tbc_id);
  if (slug) return `profile.html?slug=${encodeURIComponent(slug)}`;
  if (id)   return `profile.html?id=${encodeURIComponent(id)}`;
  return "#";
}

/* card */
function cardHTML(p){
  const name=tidy(p.display_name||`${p.first||""} ${p.last||""}`).toUpperCase();
  const team=tidy(p.team||p.org||"");
  const level=tidy(p.level||"");
  const status=tidy(p.status||"");
  const klass=tidy(p.grad_class||p.class_of||"");
  const img=tidy(p.front_img||"");
  const dots=toDots(p.letter_years||p.roster_years||"");
  return `
  <div class="flip-card">
    <article class="card" tabindex="0" aria-label="${name}">
      <div class="flip">
        <div class="face front">
          <img class="bg" src="${img||'assets/img/placeholder-front.jpg'}" onerror="this.onerror=null;this.src='assets/img/placeholder-front.jpg';" alt="${name}">
          <div class="grad"></div>
          <div class="meta">
            <div>
              <div class="player-name">${name}</div>
              <div class="team-line">${team}</div>
              <div class="chips">
                ${level?`<span class="chip level">${level}</span>`:""}
                ${status?`<span class="chip status">${status}</span>`:""}
                ${klass?`<span class="chip class">CLASS OF ${klass}</span>`:""}
              </div>
            </div>
            <div class="meta-right">
              ${nextGameBlock(p)}${last3Block(p)}
            </div>
          </div>
          <div class="dots">${dots}</div>
        </div>
        <div class="face back">
          <div class="back-head">
            <strong style="font:900 16px 'Bebas Neue'">${name}</strong>
            <a class="linkbtn" href="${profileURL(p)}">Profile</a>
          </div>
          <div class="back-body">
            <p><strong>Level:</strong> ${level||"—"}</p>
            <p><strong>Status:</strong> ${status||"—"}</p>
            <p><strong>Class of:</strong> ${klass||"—"}</p>
            <p><strong>Team:</strong> ${team||"—"}</p>
          </div>
        </div>
      </div>
      <button class="hit" aria-label="Flip card"></button>
    </article>
  </div>`;
}

/* timestamp */
function formatPhoenix(ts){const dt=ts instanceof Date?ts:new Date(ts);return new Intl.DateTimeFormat('en-US',{timeZone:'America/Phoenix',year:'numeric',month:'short',day:'2-digit',hour:'2-digit',minute:'2-digit'}).format(dt);}
function setDataStamp({fetchedAt,lastModified}){ const el=$("#dataStamp"); if(!el) return; const fetched=formatPhoenix(fetchedAt||Date.now()); const lm=lastModified?` • Sheet published copy last-modified: ${formatPhoenix(lastModified)}`:""; el.textContent=`Data pulled from Google Sheets: ${fetched}${lm}`; }

/* boot */
let ORIGINAL_ROWS=[];
async function boot(){
  try{
    const res=await fetch(CSV_URL,{cache:"no-store"});
    const lastMod=res.headers.get('last-modified');
    const txt=await res.text();
    setDataStamp({fetchedAt:new Date(),lastModified:lastMod});
    const rows=parseCSV(txt);
    ORIGINAL_ROWS=rows.slice();
    const sorted=defaultSort(ORIGINAL_ROWS,{includeRetired:false});
    $("#grid").innerHTML=sorted.map(cardHTML).join("");
    $$(".card .hit").forEach(b=>b.addEventListener("click",()=>b.closest(".card").classList.toggle("back")));
  }catch(e){
    console.error(e);
    $("#grid").innerHTML=`<p style="color:#fca5a5">Failed to load players.</p>`;
  }
}

/* UI wiring */
(function(){
  const root=document.documentElement;
  $("#btnTheme").addEventListener("click",()=>{
    const dark=getComputedStyle(root).getPropertyValue('--bg').trim()==='#0b0b0b';
    if(dark){ root.style.setProperty('--bg','#ffffff'); root.style.setProperty('--fg','#111'); root.style.setProperty('--muted','#444'); root.style.setProperty('--line','#e5e7eb'); }
    else{ root.style.setProperty('--bg','#0b0b0b'); root.style.setProperty('--fg','#f6f7f9'); root.style.setProperty('--muted','#c7ccd1'); root.style.setProperty('--line','#1f2326'); }
  });
  const L=$("#drawerLeft"),R=$("#drawerRight"),A=$("#drawerAccount");
  $("#btnMenu").addEventListener("click",()=>L.classList.toggle("open"));
  $("#openSearch").addEventListener("click",()=>L.classList.add("open"));
  $("#closeLeft").addEventListener("click",()=>L.classList.remove("open"));
  $("#btnAccount").addEventListener("click",()=>A.classList.toggle("open"));
  $("#openFilter").addEventListener("click",()=>R.classList.add("open"));
  $("#closeRight").addEventListener("click",()=>R.classList.remove("open"));
  $("#applyFilters").addEventListener("click",()=>R.classList.remove("open"));
  $("#clearFilters").addEventListener("click",()=>{
    $("#fName").value="";
    ["fLevel","fGrad","fRoster","fStatus"].forEach(id=>{ const sel=$("#"+id); [...sel.options].forEach(o=>o.selected=false); });
    const sorted=defaultSort(ORIGINAL_ROWS,{includeRetired:false});
    $("#grid").innerHTML=sorted.map(cardHTML).join("");
    $$(".card .hit").forEach(b=>b.addEventListener("click",()=>b.closest(".card").classList.toggle("back")));
  });
  const addYears=(el)=>{ let h=""; for(let y=2025;y>=1999;y--) h+=`<option>${y}</option>`; el.innerHTML=h; };
  addYears($("#fGrad")); addYears($("#fRoster"));
})();
boot();
</script>
</body>
</html>