<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>hamilton.yatstats.com — WHERE THEY YAT? (v4.1.0)</title>

<style>
/* Import Google Font */
@import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700,900&family=Roboto:wght@400;700&display=swap');

:root{
  --maroon:#7A0019; --ring:#E3E6EA; --bg:#eef0f2; --ink:#111827; --muted:#6b7280;
  --headerH:100px;
  --font-body: 'Roboto', system-ui, -apple-system, Segoe UI, Helvetica, Arial, sans-serif;
  --font-display: 'Roboto Condensed', sans-serif;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0}
body{background:var(--bg);font:15px/1.45 var(--font-body);color:var(--ink); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}
a{text-decoration:none;color:inherit}
button{font:inherit;color:inherit}

/* HEADER */
.site-header{position:fixed; inset:0 0 auto 0; height:var(--headerH); z-index:60; background:#fff; border-bottom:1px solid var(--ring); display:grid; grid-template-columns:auto 1fr auto; gap:8px; align-items:start; padding:8px 8px 6px;}
.h-left{display:flex;align-items:center;gap:8px;min-width:0}
.hambtn{width:36px;height:36px;border:0;background:transparent;display:grid;place-items:center;cursor:pointer}
.ham-logo{height:42px;width:auto;display:block}
.nav-desktop{display:flex;gap:14px;align-self:center;justify-self:center}
.nav-desktop a{font-size:12px;text-transform:uppercase;color:#1f2937;white-space:nowrap;padding:4px 0;letter-spacing:.06em}
@media (max-width:1260px){ .nav-desktop{display:none} }
.h-right{display:flex;flex-direction:column;align-items:flex-end;gap:6px;min-width:0}
.ystats-logo{height:36px;width:auto;display:block}
@media (max-width:420px){ .ystats-logo{height:32px} }
.hdr-icons{display:flex;gap:8px;align-items:center;justify-content:flex-end}
.hdr-icon{width:44px;height:44px;padding:0;border:0;background:transparent;border-radius:8px;display:grid;place-items:center;cursor:pointer;transition: background-color 0.2s ease;}
.hdr-icon svg{width:20px;height:20px;color:#111}
.hdr-icon:hover{background:rgba(0,0,0,.06)}
.hdr-icon:focus-visible{outline:2px solid #111;outline-offset:2px;border-radius:8px}
.hdr-icon.active{background:#111}
.hdr-icon.active svg{color:#fff}

/* TAGLINE */
.tagline-wrap{position:sticky;top:var(--headerH);z-index:40;background:#fff;border-bottom:1px solid var(--ring)}
.tagline{display:flex;align-items:center;justify-content:space-between;padding:8px 10px}
.tag-text{font-size:14px;line-height:1.1}
.tag-grey{color:#6b7280;font-weight:700;letter-spacing:-.02em}
.tag-strong{color:#000;font-weight:900;letter-spacing:-.02em}
.tag-tight{letter-spacing:-.04em;}
.tag-grey,.tag-strong{font-stretch:condensed; font-variation-settings:"wdth" 85}
.tag-strong, .name, .stats-name, .kv .v, .right-line, .next-chip, .last-chip { font-family: var(--font-display); }

/* GRID */
main{padding:calc(var(--headerH) + 44px) 0 84px}
.grid{padding:10px;display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:12px}
@media (min-width:560px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr))} }
@media (min-width:820px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr))} }
@media (min-width:1100px){ .grid{grid-template-columns:repeat(4,minmax(0,1fr))} }
@media (min-width:1440px){ .grid{grid-template-columns:repeat(5,minmax(0,1fr))} }

/* CARD / FLIP */
.card{background:#fff; border:1px solid var(--ring); border-radius:12px; overflow:hidden; position:relative; user-select:none; aspect-ratio:5/7; min-height:280px; box-shadow:0 4px 12px rgba(0,0,0,0.08); transition:transform 0.2s ease-out, box-shadow 0.2s ease-out;}
.card:hover{transform:translateY(-4px) scale(1.02); box-shadow:0 8px 20px rgba(0,0,0,0.12);}
.flip-card{perspective:1200px}
.flip-inner{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .55s cubic-bezier(.2,.7,.2,1)}
.card.front  .flip-inner{ transform:rotateY(0) }
.card.back   .flip-inner{ transform:rotateY(180deg) }
.face{position:absolute; inset:0; backface-visibility:hidden; -webkit-backface-visibility:hidden; overflow:hidden}

/* FRONT */
.front-face{transform:rotateY(0); background-color: #111;}
.card-img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover;}
.bottom-grad{position:absolute; left:0; right:0; bottom:0; height:66%; background:linear-gradient(to top, rgba(0,0,0,.98) 0%, rgba(0,0,0,.92) 30%, rgba(0,0,0,.86) 48%, rgba(0,0,0,0) 76%); pointer-events:none; z-index:1;}
.front-left, .front-right{position:absolute; z-index:3; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.45)}
.front-left{left:12px; bottom:12px; width:46%}
.front-right{right:12px; bottom:10px; width:72%; text-align:right}
.name{font-weight:900;text-transform:uppercase;letter-spacing:.02em;font-size:18px;line-height:1.06}
.team{font-size:13px;opacity:.98}
.parent{font-size:12px;opacity:.92;margin-top:2px}
.spacer-6{height:6px}
.stack{display:flex;flex-direction:column;gap:4px;margin-top:4px;align-items:flex-start}
.chip{display:inline-flex;align-items:center;gap:6px;background:rgba(255,255,255,.14);color:#fff;border:1px solid rgba(255,255,255,.24);border-radius:999px;padding:2px 8px 3px;font-weight:800;font-size:10px;letter-spacing:.06em}
.chip.level.mlb{background:#7A0019;border-color:#7A0019}
.chip.level.kbo{background:#0d9488;border-color:#0d9488}
.chip.level.triple-a{background:#2563eb;border-color:#2563eb}
.chip.level.double-a{background:#3b82f6;border-color:#3b82f6}
.chip.level.high-a{background:#4338ca;border-color:#4338ca}
.chip.level.low-a{background:#3730a3;border-color:#3730a3}
.chip.level.rookie{background:#0f766e;border-color:#0f766e}
.chip.level.indy{background:#3f6212;border-color:#3f6212}
.chip.level.ncaa-d1{background:#166534;border-color:#166534}
.chip.level.ncaa-d2{background:#047857;border-color:#047857}
.chip.level.ncaa-d3{background:#065f46;border-color:#065f46}
.chip.level.naia{background:#9333ea;border-color:#9333ea}
.chip.level.juco{background:#0d9488;border-color:#0d9488}
.chip.status{background:#16a34a;border-color:#16a34a}
.chip.status.retired, .chip.status.coach{background:#6b7280;border-color:#6b7280}
.chip.class{background:#374151;border-color:#374151}
.letters{display:flex;gap:6px;align-items:center;margin-top:6px}
.letter-dot{width:20px;height:20px;border-radius:50%;background:#fff;color:var(--maroon);display:grid;place-items:center;font-weight:900;font-size:11px;border:1px solid rgba(0,0,0,.15)}
.next-chip,.last-chip{display:inline-block;background:rgba(255,255,255,.14);color:#fff;border:1px solid rgba(255,255,255,.24);border-radius:999px;padding:2px 8px 3px;font-size:10px;font-weight:900;letter-spacing:.12em;margin-bottom:3px}
.right-line{font-size:12px;font-weight:800;letter-spacing:-.01em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.last3{margin-top:10px;width:100%;margin-left:auto}
.last3 .item{font-size:12px;color:#e5e7eb;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:right}

/* BACK */
.back-face{transform:rotateY(180deg);background:#fff;color:#111;display:grid;grid-template-rows:1fr 1fr;height:100%}
.back-top{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:10px 12px 6px;align-items:end}
.back-left{min-width:0;display:flex;flex-direction:column}
.stats-name{font-weight:900;text-transform:uppercase;letter-spacing:.02em;font-size:16px;margin-bottom:2px}
.team-line{color:#1f2937;font-size:13px;line-height:1.15;margin-top:2px}
.parent-line{color:#6b7280;font-size:12px;line-height:1.1;margin-top:2px}
.tiny-bar{margin-top:auto;width:100%}
.tiny-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
.tabbtn{height:28px;display:grid;place-items:center;border-radius:8px;border:1px solid #e5e7eb;background:#fff;cursor:pointer;transition:background .15s,border-color .15s}
.tabbtn svg{width:14px;height:14px;color:#111}
.tabbtn.active{background:#111;border-color:#111}
.tabbtn.active svg{color:#fff}
.action-chip{margin-top:6px;display:inline-block;width:100%;text-align:center;padding:6px 10px;border-radius:999px;border:1px solid #111;background:#111;color:#fff;font-weight:900;font-size:10px;letter-spacing:.12em;cursor:pointer;user-select:none}
.action-chip.flat{background:#0f172a;border-color:#0f172a}
.action-chip.ghost{background:#fff;color:#111;border-color:#1f2937}
.action-chip.active{background:#7A0019;border-color:#7A0019}
.back-right{display:flex;flex-direction:column}
.hs-box{flex:1 1 auto;width:100%;aspect-ratio:3/4;position:relative;overflow:hidden;border-radius:8px;background:#d1d5db}
.hs-box img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.profile-chip{width:100%}
.back-bottom{border-top:1px solid var(--ring);padding:10px 12px 12px;min-height:0;overflow:hidden;display:flex;flex-direction:column}
.pane{display:none;min-height:0;overflow:auto;flex:1;animation:slide .18s ease}
.pane.active{display:block}
@keyframes slide{from{opacity:.2;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.kv-wrap12{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;gap:8px;height:100%}
.kv{background:#f3f4f6;border-radius:10px;text-align:center;padding:8px;display:flex;flex-direction:column;justify-content:center}
.kv .k{font-size:11px;color:#6b7280}
.kv .v{font-weight:800}

/* STORY PANE STYLES */
.story-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 12px; }
.story-item a { display: block; text-decoration: none; background: #f3f4f6; border-radius: 8px; padding: 8px 10px; transition: background .2s ease; }
.story-item a:hover { background: #e5e7eb; }
.story-item .story-headline { font-weight: 700; color: #111827; font-size: 13px; line-height: 1.3; }
.story-item .story-meta { font-size: 11px; color: #6b7280; margin-top: 2px; }
.social-item { background: #f3f4f6; border-radius: 8px; padding: 10px; }
.social-header { display: flex; align-items: center; gap: 6px; font-size: 12px; font-weight: 700; }
.social-text { font-size: 13px; line-height: 1.4; margin-top: 6px; color: #374151; }
.ig-item img { width: 100%; height: auto; border-radius: 6px; margin-top: 8px; border: 1px solid #e5e7eb; }
.pane-placeholder { color: #9ca3af; text-align: center; font-size: 13px; padding-top: 20px; }

/* FLIP ZONES */
.hit{position:absolute;top:0;bottom:0;width:22%;z-index:2;background:transparent;border:0}
@media (max-width:480px){ .hit{width:26%} }
.hit.left{left:0}.hit.right{right:0}

/* DRAWERS */
.scrim{position:fixed;left:0;right:0;top:var(--headerH);bottom:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:opacity .25s ease;z-index:55}
.scrim.open{opacity:1;pointer-events:auto}
body.no-scroll{overflow:hidden}
.drawer-left{position:fixed;top:var(--headerH);bottom:0;left:0;width:360px;max-width:90vw;background:#fff;border-right:1px solid var(--ring);transform:translateX(-100%);transition:transform .25s ease;z-index:56;display:flex;flex-direction:column}
.drawer-left.open{transform:translateX(0)}
.drawer-left .drawer-header{height:56px;border-bottom:1px solid var(--ring);display:flex;align-items:center;justify-content:space-between;padding:0 12px}
.left-title{font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:12px;color:#374151}
.left-content{padding:12px;min-height:0;overflow:auto}
.nav-left-list{display:flex;flex-direction:column;gap:12px;margin-bottom:10px}
.nav-left-link{text-decoration:none;color:#2b2b2b;text-transform:uppercase;letter-spacing:.12em;font-weight:400;font-size:13px;line-height:1;padding:10px 6px 8px 4px;border-radius:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.nav-left-link:hover{background:#f5f6f8}
.nav-left-sep{height:1px;background:#eceff3;margin:8px 0}
.left-search-h{font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:12px;color:#374151;margin:2px 0 8px}
.left-search .ghost{display:block;width:100%;background:#eef1f5;border:1px solid #d7dce2;border-radius:10px;padding:10px 12px;font-size:14px;outline:none}
.left-results{margin-top:8px;list-style:none;padding:0}
.left-results li{padding:8px 6px;border-radius:8px;cursor:pointer}
.left-results li:hover{background:#f5f6f8}
.global-line{margin-top:12px;font-size:12px;color:#374151;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.global-line .mini-icon{width:14px;height:14px;color:#111}
.drawer-right{position:fixed;top:var(--headerH);bottom:0;right:0;width:420px;max-width:92vw;background:#fff;border-left:1px solid var(--ring);transform:translateX(100%);transition:transform .25s ease;z-index:56;display:flex;flex-direction:column}
.drawer-right.open{transform:translateX(0)}
.drawer-right .drawer-header{height:56px;border-bottom:1px solid var(--ring);display:flex;align-items:center;justify-content:space-between;padding:0 12px}
.right-title{font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:12px;color:#374151}
.drawer-body{min-height:0;overflow:auto}
.drawer-content{display:block;padding:12px 12px 22px}
.rail{border:1px solid #e5e7eb;border-radius:10px;margin-bottom:10px;overflow:hidden}
.rail summary{list-style:none;cursor:pointer;padding:9px 12px;font-weight:800;letter-spacing:.14em;text-transform:uppercase;font-size:12px;color:#374151;border-bottom:1px solid #e5e7eb}
.rail summary::-webkit-details-marker{display:none}
.rail .inner{padding:8px 10px;max-height:40vh;overflow:auto}
.ghost{display:block;width:100%;background:#eef1f5;border:1px solid #d7dce2;border-radius:8px;padding:10px;font-size:13px;color:#111;outline:none}
.select-multi{height:110px}
.hint{color:#9aa1ab;font-size:11px;margin:4px 2px 10px}
@media (max-width:800px){ .hint{display:none} }
@media (min-width:1024px){ .drawer-right{width:300px;max-width:24vw} }
.drawer-auth{position:fixed;top:var(--headerH);bottom:0;right:0;width:420px;max-width:92vw;background:#fff;border-left:1px solid var(--ring);transform:translateX(100%);transition:transform .25s ease;z-index:56;display:flex;flex-direction:column}
.drawer-auth.open{transform:translateX(0)}
.drawer-auth .drawer-header{height:56px;border-bottom:1px solid var(--ring);display:flex;align-items:center;justify-content:space-between;padding:0 12px}
.auth-title{font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:12px;color:#374151}
.auth-body{min-height:0;overflow:auto;padding:12px 12px 22px}
.input{display:block;width:100%;background:#eef1f5;border:1px solid #d7dce2;border-radius:10px;padding:12px 12px;font-size:14px;color:#111;outline:none}
.btn-primary{display:inline-block;width:100%;background:#111;color:#fff;border:1px solid #111;border-radius:10px;padding:10px 12px;font-weight:800;letter-spacing:.06em;cursor:pointer;margin-top:10px}
.closebtn{width:34px;height:34px;border:0;background:transparent;display:grid;place-items:center;cursor:pointer}
.closebtn svg{width:18px;height:18px}

/* FOOTER */
.footer{position:fixed;left:0;right:0;bottom:0;height:72px;background:#000;color:#fff;display:flex;align-items:center;justify-content:center;z-index:10}
.footer img{max-height:60px;width:auto}
.build-pill{position:absolute;left:10px;bottom:10px;background:rgba(255,255,255,.12);color:#fff;font-size:12px;padding:6px 10px;border-radius:12px}

/* LOADING INDICATOR */
.loading-indicator {
  position: fixed; inset: 0; display: flex; align-items: center; justify-content: center;
  background: var(--bg); color: var(--muted); font-family: var(--font-display);
  font-size: 24px; letter-spacing: .1em; z-index: 999;
  opacity: 1; transition: opacity 0.3s ease; pointer-events: none;
}
</style>
</head>
<body>

<header class="site-header">
  <div class="h-left">
    <button class="hambtn" id="openLeft" aria-label="Open Navigation">
      <svg viewBox="0 0 24 24" width="22" height="22"><path fill="currentColor" d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"/></svg>
    </button>
    <img class="ham-logo" src="https://i.postimg.cc/htV31M3K/hamilton-logo-block-with-3-lines-of-type.png" alt="Hamilton HS"/>
  </div>

  <nav class="nav-desktop">
    <a href="#">Where They YAT?</a>
    <a href="#">Active Alumni News</a>
    <a href="#">Next-Level All-Time List</a>
    <a href="#">NIL &amp; YAT-A-BOY Marketplace</a>
    <a href="#">The Current Team</a>
    <a href="#">PCDAction Partner Program</a>
  </nav>

  <div class="h-right">
    <img class="ystats-logo" src="https://i.postimg.cc/G2m7rR3p/yatstats-logo-stacked.png" alt="YAT?STATS"/>
    <div class="hdr-icons">
      <button class="hdr-icon" id="iconSearch" aria-label="Search" title="Search">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M11 4a7 7 0 1 1 0 14 7 7 0 0 1 0-14zm9.7 15.3-3.4-3.4a9 9 0 1 0-1.4 1.4l3.4 3.4a1 1 0 0 0 1.4-1.4z"/></svg>
      </button>
      <button class="hdr-icon" id="iconFilter" aria-label="Filters" title="Filters">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M3 5h18l-6.5 7.5V20l-5-2v-5.5L3 5z"/></svg>
      </button>
      <button class="hdr-icon" id="iconReset" aria-label="Reset" title="Reset">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 5V2L8 6l4 4V7a5 5 0 1 1-5 5H5a7 7 0 1 0 7-7z"/></svg>
      </button>
      <button class="hdr-icon" id="iconProfile" aria-label="Account" title="Account">
        <svg viewBox="0 0 24 24"><path fill="currentColor" d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm0 2c-4.2 0-8 2.1-8 5v1h16v-1c0-2.9-3.8-5-8-5z"/></svg>
      </button>
    </div>
  </div>
</header>

<div class="tagline-wrap">
  <div class="tagline">
    <div class="tag-text">
      <span class="tag-grey">WHERE THEY</span><span class="tag-strong tag-tight"> YAT?</span>
      &nbsp;&nbsp;
      <span class="tag-grey">SWIPE FOR</span><span class="tag-strong tag-tight"> STATS!</span>
    </div>
  </div>
</div>

<div class="scrim" id="scrim"></div>

<aside class="drawer-left" id="drawerLeft" aria-hidden="true" role="navigation">
  <div class="drawer-header">
    <div class="left-title">Navigation</div>
    <button class="closebtn" id="closeLeft" aria-label="Close">
      <svg viewBox="0 0 24 24"><path fill="currentColor" d="M6.225 4.811 4.811 6.225 10.586 12l-5.775 5.775 1.414 1.414L12 13.414l5.775 5.775 1.414-1.414L13.414 12l5.775-5.775-1.414-1.414L12 10.586 6.225 4.811z"/></svg>
    </button>
  </div>
  <div class="left-content">
    <div class="nav-left-list">
      <a class="nav-left-link" href="#">WHERE THEY YAT?</a>
      <a class="nav-left-link" href="#">ACTIVE ALUMNI NEWS</a>
      <a class="nav-left-link" href="#">NEXT-LEVEL ALL-TIME LIST</a>
      <a class="nav-left-link" href="#">NIL &amp; YAT-A-BOY MARKETPLACE</a>
      <a class="nav-left-link" href="#">THE CURRENT TEAM</a>
      <a class="nav-left-link" href="#">PCDACTION PARTNER PROGRAM</a>
      <div class="nav-left-sep"></div>
    </div>
    <div class="left-search">
      <div class="left-search-h">PLAYER PROFILE SEARCH</div>
      <input id="localSearch" type="text" class="ghost" placeholder="Type a player name…" autocomplete="off"/>
      <ul id="localResults" class="left-results"></ul>
      <div class="global-line">
        <svg class="mini-icon" viewBox="0 0 24 24"><path fill="currentColor" d="M11 4a7 7 0 1 1 0 14 7 7 0 0 1 0-14zm9.7 15.3-3.4-3.4a9 9 0 1 0-1.4 1.4l3.4 3.4a1 1 0 0 0 1.4-1.4z"/></svg>
        <a href="https://www.yatstats.com" target="_blank" rel="noopener">GLOBAL PLAYER SEARCH</a> |
        <a href="https://www.yatstats.com" target="_blank" rel="noopener">GLOBAL SCHOOL SEARCH</a>
      </div>
    </div>
  </div>
</aside>

<aside class="drawer-right" id="drawerRight" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="drawer-header">
    <div class="right-title">Filters</div>
    <button class="closebtn" id="closeRight" aria-label="Close">
      <svg viewBox="0 0 24 24"><path fill="currentColor" d="M6.225 4.811 4.811 6.225 10.586 12l-5.775 5.775 1.414 1.414L12 13.414l5.775 5.775 1.414-1.414L13.414 12l5.775-5.775-1.414-1.414L12 10.586 6.225 4.811z"/></svg>
    </button>
  </div>
  <div class="drawer-body">
    <div class="drawer-content">
      <details class="rail" open><summary>By Player</summary><div class="inner"><input id="filterName" type="text" class="ghost" placeholder="Type name & press Enter"/><div class="hint">Press <b>Enter</b> to apply and close.</div></div></details>
      <details class="rail" open><summary>By Level</summary><div class="inner"><select id="lvl" class="ghost select-multi" multiple></select></div></details>
      <details class="rail" open><summary>By Grad Class</summary><div class="inner"><select id="grad" class="ghost select-multi" multiple></select></div></details>
      <details class="rail" open><summary>By Roster Year</summary><div class="inner"><select id="roster" class="ghost select-multi" multiple></select></div></details>
      <details class="rail" open><summary>By Status</summary><div class="inner"><select id="status" class="ghost select-multi" multiple><option value="Active">ACTIVE</option><option value="Free Agent">FREE AGENT</option><option value="Injured">INJURED</option><option value="Retired">RETIRED</option></select></div></details>
    </div>
  </div>
</aside>

<aside class="drawer-auth" id="drawerAuth" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="drawer-header">
    <div class="auth-title">Sign Up | Login</div>
    <button class="closebtn" id="closeAuth" aria-label="Close">
      <svg viewBox="0 0 24 24"><path fill="currentColor" d="M6.225 4.811 4.811 6.225 10.586 12l-5.775 5.775 1.414 1.414L12 13.414l5.775 5.775 1.414-1.414L13.414 12l5.775-5.775-1.414-1.414L12 10.586 6.225 4.811z"/></svg>
    </button>
  </div>
  <div class="auth-body">
    <label>Email</label>
    <input class="input" type="email" placeholder="you@example.com"/>
    <label style="margin-top:10px">Password</label>
    <input class="input" type="password" placeholder="••••••••"/>
    <button class="btn-primary">Continue</button>
  </div>
</aside>

<main>
  <div class="loading-indicator" id="loadingIndicator">LOADING...</div>
  <section id="grid" class="grid"></section>
</main>

<footer class="footer">
  <img src="https://i.postimg.cc/v8LxKy54/no-errors-sample-banner.png" alt="Sponsor banner">
  <div class="build-pill">BUILD: ham-v4.1.0</div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

  // --- DATA ---
  // For this single-file prototype, player data is included directly.
  const playersData = [
    {
      "id": "cody-bellinger", "name": "CODY BELLINGER", "graduatingClass": 2013, "currentLevel": "MLB", "status": "Active", "position": "CF/1B", "team": "New York Yankees",
      "frontImg": "https://i.postimg.cc/9F19KG5h/new-york-yankees-outfielder-cody-bellinger.jpg", "highSchoolImg": "https://i.postimg.cc/Jhq690Lg/01-Bellinger-Front-page-00001.jpg",
      "batting": { "avg": ".284", "obp": ".345", "slg": ".520", "ops": ".865", "hits": "150", "runs": "95", "hr": "35", "rbi": "105" },
      "nextGame": { "opponent": "@ BOSTON RED SOX", "date": "9/1 4:10 PM AZ" },
      "last3": [
        { "date": "8/29", "opp": "@ BOS", "line": "2-4, HR, 2 RBI" }, { "date": "8/28", "opp": "@ BOS", "line": "1-3, BB" }, { "date": "8/27", "opp": "vs TOR", "line": "0-4" }
      ],
      "letterWinnerYears": [2012, 2013], "tbcId": 180827,
      "stories": {
        "news": [
          { "source": "MLB.com", "headline": "Bellinger's Grand Slam Lifts Yankees Over Red Sox", "date": "2025-08-29", "url": "#" },
          { "source": "ESPN", "headline": "Is Cody Bellinger Back to His MVP Form?", "date": "2025-08-28", "url": "#" },
          { "source": "The Athletic", "headline": "An inside look at Bellinger's swing adjustments.", "date": "2025-08-25", "url": "#" }
        ],
        "twitter": [
          { "handle": "@Yankees", "text": "Belli does it again! Another clutch homer puts the pinstripes on top. #RepBX", "date": "2025-08-29", "url": "#" }
        ],
        "instagram": [
          { "handle": "@cody_bellinger", "imageUrl": "https://i.postimg.cc/9F19KG5h/new-york-yankees-outfielder-cody-bellinger.jpg", "caption": "Great team win tonight. On to the next one.", "url": "#" }
        ]
      }
    },
    { "id":"patrick-murphy", "name":"PATRICK MURPHY", "graduatingClass":2013, "currentLevel":"KBO", "status":"Active", "position":"P", "team":"KT Wiz Suwon — KBO", "frontImg":"https://i.postimg.cc/JnCXccvC/MURPH.avif", "highSchoolImg":"https://i.postimg.cc/pdxcG8gz/02-Murphy-Front-page-00001.jpg", "pitching":{"era":"3.22","so":"71","whip":"1.09","oba":".224","kbb":"3.6","fip":"3.45","ip":"112.0","er":"40","hr":"8","qs":"10","w":"8","sv":"0"}, "nextGame":{"opponent":"vs KIA TIGERS", "date":"9/2 2:30AM AZ"}, "last3":[{"date":"8/27","opp":"vs KIA","line":"6.0 IP, 1 ER, 7 K"},{"date":"8/23","opp":"@ KIA","line":"5.2 IP, 2 ER, 5 K"},{"date":"8/20","opp":"vs SSG","line":"7.0 IP, 0 ER, 8 K"}], "letterWinnerYears":[2012,2013] },
    { "id":"dom-hamel", "name":"DOM HAMEL", "graduatingClass":2017, "currentLevel":"Triple-A", "status":"Active", "position":"P", "team":"Syracuse Mets — New York Mets", "frontImg":"https://i.postimg.cc/rwYchfnt/20250804-151814.jpg", "highSchoolImg":"https://i.postimg.cc/VLC7zDwX/23-Hamel-Front-page-00001.jpg", "pitching":{"era":"3.89","so":"93","whip":"1.18"}, "nextGame":{"date":"8/31 3:35 PM AZ", "opponent":"@ SCRANTON/ WB"}, "last3":[{"date":"8/26","opp":"@ SWB","line":"1.0 IP, 1 ER, 1 K"},{"date":"8/21","opp":"vs IND","line":"1.0 IP, 7 ER"},{"date":"8/15","opp":"@ ROC","line":"1.0 IP, 1 ER"}], "letterWinnerYears":[2016,2017] },
    { "id":"logan-boyer", "name":"LOGAN BOYER", "graduatingClass":2016, "currentLevel":"Triple-A", "status":"Active", "position":"P", "team":"Oklahoma City — Los Angeles Dodgers", "frontImg":"https://i.postimg.cc/c1Kq8Dkv/Logan-Boyer.jpg", "highSchoolImg":"https://i.postimg.cc/gJtM27rH/11-Boyer-Front-page-00001.jpg", "letterWinnerYears":[2014,2015,2016] },
    { "id":"drew-swift", "name":"DREW SWIFT", "graduatingClass":2017, "currentLevel":"Triple-A", "status":"Active", "position":"SS", "team":"Las Vegas Aviators — Athletics", "frontImg":"https://i.postimg.cc/GmmSKFsV/AISelect-20250826-023939-Instagram.jpg", "highSchoolImg":"https://i.postimg.cc/0j6VMCwR/04-Swift-Front-page-00001.jpg", "batting":{"avg":".271","obp":".335","slg":".414","ops":".749","hits":"114","runs":"68","hr":"10","rbi":"52","doubles":"24","triples":"3","sb":"18","bb":"41"}, "nextGame":{ "date":"8/31 5:05 PM AZ", "opponent":"vs. IOWA" }, "last3":[{"date":"08/25","opp":"@ ABQ","line":"2-5, 2B, R"},{"date":"08/24","opp":"@ ABQ","line":"1-3, BB, SB"},{"date":"08/23","opp":"@ ABQ","line":"0-4"}], "letterWinnerYears":[2014,2015,2016,2017] },
    { "id":"shane-murphy", "name":"SHANE MURPHY", "graduatingClass":2019, "currentLevel":"Triple-A", "status":"Active", "position":"P", "team":"Birmingham Barons — Chicago White Sox", "frontImg":"https://i.postimg.cc/HL7zvBWZ/Shane-Murphy-Birmingham-Barons-Chicago-White-Sox.jpg", "highSchoolImg":"https://i.postimg.cc/bYMCX47z/26-Murphy-Front-page-00001.jpg", "letterWinnerYears":[2016,2017,2018,2019] },
    { "id":"brock-selvidge", "name":"BROCK SELVIDGE", "graduatingClass":2021, "currentLevel":"Double-A", "status":"Active", "position":"P", "team":"Somerset Patriots — New York Yankees", "frontImg":"https://i.postimg.cc/kgSyd4xs/AISelect-20250826-020305-Instagram.jpg", "highSchoolImg":"https://i.postimg.cc/vTp3W6r1/22-Selvidge-Front-page-00001.jpg", "letterWinnerYears":[2018,2019,2020,2021] },
    { "id":"luke-thiele", "name":"LUKE THIELE", "graduatingClass":2021, "currentLevel":"NCAA-D1", "status":"Active", "position":"IF", "team":"Washington State — Pac-12", "frontImg":"https://i.postimg.cc/593zLzmD/luke-theil.jpg", "highSchoolImg":"https://i.postimg.cc/LXYrnvvj/45-Thiele-Front-page-00001.jpg", "letterWinnerYears":[2020,2021] },
    { "id":"tyler-wilson", "name":"TYLER WILSON", "graduatingClass":2021, "currentLevel":"High-A", "status":"Active", "position":"LF/RF", "team":"Hudson Valley Renegades — NY Yankees", "frontImg":"https://i.postimg.cc/pXpZqkrg/1756201702161-1.jpg", "highSchoolImg":"https://i.postimg.cc/PxXbZQ0V/34-Wilson-Front-page-00001.jpg", "letterWinnerYears":[2018,2019,2020] },
    { "id":"shane-anderson", "name":"SHANE ANDERSON", "graduatingClass":2020, "currentLevel":"NAIA", "status":"Active", "position":"P", "team":"Georgia Gwinnett — Continental Athletic", "frontImg":"https://i.postimg.cc/J4j5XP4M/IMG-20250826-030341.jpg", "highSchoolImg":"https://i.postimg.cc/SNj7TkrQ/AISelect-20250826-031127-Gallery-1.jpg", "letterWinnerYears":[2020] },
    { "id":"chaz-deluca", "name":"CHAZ DELUCA", "graduatingClass":2017, "currentLevel":"High-A", "status":"COACH", "position":"Player Development", "team":"Aberdeen IronBirds — Baltimore Orioles", "frontImg":"https://i.postimg.cc/rp0T753Z/IMG-7630.jpg", "highSchoolImg":"https://i.postimg.cc/v8xHxwmx/AISelect-20250729-224953-System-UI.jpg", "letterWinnerYears":[2016,2017] }
  ];
  const players = [...playersData].sort((a, b) => (+b.graduatingClass || 0) - (+a.graduatingClass || 0));

  // --- HELPERS & RENDERERS ---
  const byId = id => document.getElementById(id);
  function lvlClass(l) { return String(l || '').toLowerCase().replace(/\s+/g, '-').replace('aaa', 'triple-a').replace('aa', 'double-a'); }
  function teamAndParent(p) { const raw = String(p.team || ''); const parts = raw.split('—'); const team = (parts[0] || raw).trim(); let parent = (parts[1] || '').trim(); if ((p.currentLevel || '').toUpperCase() === 'MLB') parent = ''; return { team, parent }; }
  function fmtLast3(g) { return `${g.date || '—'} • ${g.opp || '—'} — ${g.line || '—'}`; }
  function formatNextTwoLines(ng) { if (!ng) return ['—', '—']; const ds = String(ng.date || '').trim(); const mmdd = (ds.match(/\b(\d{1,2}\/\d{1,2})\b/) || [, '—'])[1]; let time = (ds.match(/(\d{1,2}:\d{2}\s*[AP]M)/i) || [, '—'])[1].toUpperCase(); const tz = (ds.match(/\b(ET|CT|MT|PT|AZ)\b/i) || [, ''])[1].toUpperCase(); if (tz && !time.includes(tz)) time = `${time} ${tz}`; return [`${mmdd} - ${time}`.trim(), String(ng.opponent || '—').trim() || '—']; }
  function letterDots(years) { if (!years || !years.length) return ''; const sorted = [...years].sort((a, b) => b - a); return `<div class="letters">${sorted.slice(0, 4).map(y => `<span class="letter-dot" title="${y}">${String(y).slice(-2)}</span>`).join('')}</div>`; }
  function makeKV(k, v) { return `<div class="kv"><div class="k">${k}</div><div class="v">${v ?? '—'}</div></div>`; }
  
  function makeStats12(p) {
    if (p.batting) { const b = p.batting; return `${makeKV('AVG', b.avg)} ${makeKV('OBP', b.obp)} ${makeKV('SLG', b.slg)} ${makeKV('OPS', b.ops)} ${makeKV('H', b.hits)} ${makeKV('R', b.runs)} ${makeKV('HR', b.hr)} ${makeKV('RBI', b.rbi)} ${makeKV('2B', b.doubles || '—')} ${makeKV('3B', b.triples || '—')} ${makeKV('SB', b.sb || '—')} ${makeKV('BB', b.bb || '—')}`; }
    const x = p.pitching || {}; return `${makeKV('ERA', x.era)} ${makeKV('WHIP', x.whip)} ${makeKV('OBA', x.oba || '—')} ${makeKV('K/BB', x.kbb || '—')} ${makeKV('FIP', x.fip || '—')} ${makeKV('IP', x.ip || '—')} ${makeKV('ER', x.er || '—')} ${makeKV('K', x.so || x.ko || '—')} ${makeKV('QS', x.qs || '—')} ${makeKV('HR', x.hr || '—')} ${makeKV('W', x.w || '—')} ${makeKV('SV', x.sv || '—')}`;
  }

  function makeStoryPanes(p) {
    const stories = p.stories || {};
    const newsHtml = stories.news?.length ? `<ul class="story-list">${stories.news.map(item => `<li class="story-item"><a href="${item.url}" target="_blank" rel="noopener"><div class="story-headline">${item.headline}</div><div class="story-meta">${item.source} • ${item.date}</div></a></li>`).join('')}</ul>` : '<div class="pane-placeholder">No recent news.</div>';
    const twitterHtml = stories.twitter?.length ? `<ul class="story-list">${stories.twitter.map(item => `<li class="social-item"><div class="social-header">${item.handle}</div><div class="social-text">${item.text}</div></li>`).join('')}</ul>` : '<div class="pane-placeholder">No recent posts.</div>';
    const instagramHtml = stories.instagram?.length ? `<ul class="story-list">${stories.instagram.map(item => `<li class="ig-item social-item"><div class="social-header">${item.handle}</div><a href="${item.url}" target="_blank" rel="noopener"><img src="${item.imageUrl}" alt="Instagram post from ${item.handle}" loading="lazy" /></a></li>`).join('')}</ul>` : '<div class="pane-placeholder">No recent posts.</div>';
    return `<div class="pane pane-stats active" data-pane="stats"><div class="kv-wrap12">${makeStats12(p)}</div></div><div class="pane pane-news" data-pane="news">${newsHtml}</div><div class="pane pane-x" data-pane="x">${twitterHtml}</div><div class="pane pane-ig" data-pane="ig">${instagramHtml}</div>`;
  }

  function makeCard(p) {
    const lvl = lvlClass(p.currentLevel); const { team, parent } = teamAndParent(p); const [ng1, ng2] = formatNextTwoLines(p.nextGame || {}); const profUrl = `profile.html?id=${encodeURIComponent(p.id)}`;
    return `<article class="card flip-card front" tabindex="0" aria-label="${(p.name || '').toUpperCase()}"><button class="hit left"  data-toggle="prev" aria-label="Flip previous"></button><button class="hit right" data-toggle="next" aria-label="Flip next"></button><div class="flip-inner"><section class="face front-face"><img class="card-img" src="${(p.frontImg || p.highSchoolImg || '')}" alt="${p.name}" onerror="this.onerror=null;this.style.display='none'" loading="lazy"><div class="bottom-grad"></div><div class="front-left"><div class="name">${(p.name || '').toUpperCase()}</div><div class="team">${team}</div>${parent ? `<div class="parent">${parent}</div>` : `<div class="parent">&nbsp;</div>`}<div class="spacer-6"></div><div class="stack">${p.currentLevel ? `<span class="chip level ${lvl}">${String(p.currentLevel).toUpperCase()}</span>` : ''}${p.status ? `<span class="chip status ${String(p.status).toLowerCase().replace(' ', '-')}">${String(p.status).toUpperCase()}</span>` : ''}${p.graduatingClass ? `<span class="chip class">CLASS OF ${p.graduatingClass}</span>` : ''}</div>${letterDots(p.letterWinnerYears)}</div><div class="front-right"><span class="next-chip">NEXT GAME</span><div class="right-line">${ng1}</div><div class="right-line">${ng2}</div><div class="last3"><span class="last-chip">LAST 3 GAMES</span><div class="item">${p.last3?.[0] ? fmtLast3(p.last3[0]) : '—'}</div><div class="item">${p.last3?.[1] ? fmtLast3(p.last3[1]) : '—'}</div><div class="item">${p.last3?.[2] ? fmtLast3(p.last3[2]) : '—'}</div></div></div></section><section class="face back-face"><div class="back-top"><div class="back-left"><div class="stats-name">${(p.name || '').toUpperCase()}</div><div class="team-line">${team || ''}</div><div class="parent-line">${parent || ''}</div><div class="tiny-bar" data-noflip><div class="tiny-grid" role="tablist" aria-label="Content tabs" data-noflip><button class="tabbtn active" data-tab="stats" title="Stats (default)" aria-pressed="true" data-noflip><svg viewBox="0 0 24 24"><path fill="currentColor" d="M5 3h2v18H5zM11 10h2v11h-2zM17 6h2v15h-2z"/></svg></button><button class="tabbtn" data-tab="news" title="News" aria-pressed="false" data-noflip><svg viewBox="0 0 24 24"><path fill="currentColor" d="M4 5h16v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5zm2 2v12h12V7H6zm1 1h10v3H7V8z"/></svg></button><button class="tabbtn" data-tab="x" title="X" aria-pressed="false" data-noflip><svg viewBox="0 0 1200 1227"><path fill="currentColor" d="M714 511 1160 0H996L689 356 420 0H0l463 607L0 1227h164l329-379 286 379h420zM327 120h154l646 873H973z"/></svg></button><button class="tabbtn" data-tab="ig" title="Instagram" aria-pressed="false" data-noflip><svg viewBox="0 0 24 24"><path fill="currentColor" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 .001 10.001A5 5 0 0 0 12 7zm6-2.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/></svg></button></div><button class="action-chip flat tab-stats active" data-tab="stats" data-noflip>2025 SEASON STATS</button></div></div><div class="back-right"><div class="hs-box" aria-hidden="true"><img src="${(p.highSchoolImg || p.frontImg || '')}" alt="${(p.name || 'HS')}" onerror="this.onerror=null;this.style.display='none'" loading="lazy"></div><a class="action-chip ghost profile-chip" href="${profUrl}" data-noflip>PLAYER PROFILE</a></div></div><div class="back-bottom" data-noflip>${makeStoryPanes(p)}</div></section></div></article>`;
  }
  function render(list) { byId('grid').innerHTML = list.map(makeCard).join(''); attachInteractions(); }

  // --- FILTERS ---
  const LEVEL_ORDER = ["MLB", "KBO", "TRIPLE-A", "DOUBLE-A", "HIGH-A", "LOW-A", "ROOKIE", "INDY", "NCAA", "NCAA-D1", "NCAA-D2", "NCAA-D3", "NAIA", "JUCO"];
  function yearsRange(start, end) { const arr = []; for (let y = start; y >= end; y--) arr.push(y); return arr; }
  function uniqueSortedGradYears() { const set = new Set(players.map(p => p.graduatingClass).filter(Boolean)); const have = [...set].map(Number); const want = yearsRange(new Date().getFullYear(), 2000); return [...new Set([...want, ...have])].sort((a,b)=>b-a); }
  function uniqueRosterYears() { const set = new Set(); players.forEach(p => (p.letterWinnerYears || []).forEach(y => set.add(Number(y)))); const have = [...set]; const want = yearsRange(new Date().getFullYear(), 2000); return [...new Set([...want, ...have])].sort((a,b)=>b-a); }
  function populateFilters() {
    const lSel = byId('lvl'); lSel.innerHTML = ''; LEVEL_ORDER.forEach(L => { const o = document.createElement('option'); o.value = L; o.textContent = L; lSel.appendChild(o); });
    const gSel = byId('grad'); gSel.innerHTML = ''; uniqueSortedGradYears().forEach(y => { const o = document.createElement('option'); o.value = String(y); o.textContent = y; gSel.appendChild(o); });
    const rSel = byId('roster'); rSel.innerHTML = ''; uniqueRosterYears().forEach(y => { const o = document.createElement('option'); o.value = String(y); o.textContent = y; rSel.appendChild(o); });
  }
  function getMultiValues(id) { const sel = byId(id); return sel ? [...sel.options].filter(o => o.selected).map(o => o.value) : []; }
  function applyFilters() {
    const qLeft = (byId('localSearch')?.value || '').toLowerCase().trim(); const qRight = (byId('filterName')?.value || '').toLowerCase().trim(); const q = qRight || qLeft;
    const levels = getMultiValues('lvl').map(s => s.toUpperCase()); const grads = getMultiValues('grad'); const years = getMultiValues('roster').map(Number); const stats = getMultiValues('status').map(s => s.toLowerCase());
    const out = players.filter(p => {
      const name = (p.name || '').toLowerCase(); if (q && !name.includes(q)) return false;
      if (levels.length) { const L = String(p.currentLevel || '').toUpperCase().replace('AAA', 'TRIPLE-A').replace('AA', 'DOUBLE-A'); if (!levels.includes(L)) return false; }
      if (grads.length && !grads.includes(String(p.graduatingClass))) return false; if (years.length) { const lw = (p.letterWinnerYears || []).map(Number); if (!lw.some(y => years.includes(y))) return false; }
      if (stats.length) { if (!stats.includes(String(p.status || '').toLowerCase())) return false; }
      return true;
    });
    render(out);
  }
  function resetAll() {
    const ls = byId('localSearch'); if (ls) ls.value = ''; const fn = byId('filterName'); if (fn) fn.value = '';
    ['lvl', 'grad', 'roster', 'status'].forEach(id => { const sel = byId(id); if (sel) [...sel.options].forEach(o => o.selected = false); });
    render(players);
  }

  // --- INTERACTIONS & DRAWERS ---
  const INTERACTIVE_SEL = '[data-noflip], .tabbtn, .action-chip, a,button,input,select,textarea';
  function toggle(card) { if (!card) return; card.classList.contains('front') ? (card.classList.remove('front'), card.classList.add('back')) : (card.classList.remove('back'), card.classList.add('front')); }
  function attachInteractions() {
    document.querySelectorAll('.card').forEach(c => { if (!c.classList.contains('front') && !c.classList.contains('back')) c.classList.add('front'); });
    document.querySelectorAll('.card .hit').forEach(hit => { hit.addEventListener('click', e => { if (e.target.closest(INTERACTIVE_SEL)) return; toggle(hit.closest('.card')); }); });
    let sx = 0, swc = null;
    document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('touchstart', e => { if (e.target.closest(INTERACTIVE_SEL)) { swc = null; return; } swc = card; sx = e.touches[0].clientX; }, { passive: true });
      card.addEventListener('touchend', e => { if (!swc) return; const dx = e.changedTouches[0].clientX - sx; if (Math.abs(dx) > 40) toggle(swc); swc = null; });
    });
    document.querySelectorAll('.tiny-grid, .tab-stats').forEach(container => {
      container.addEventListener('click', (e) => {
        const btn = e.target.closest('.tabbtn, .action-chip.flat'); if (!btn) return; e.stopPropagation();
        const card = btn.closest('.card'); const pane = btn.dataset.tab || 'stats';
        card.querySelectorAll('.tabbtn').forEach(b => b.classList.toggle('active', b.dataset.tab === pane));
        const statsChip = card.querySelector('.action-chip.flat.tab-stats'); if (statsChip) statsChip.classList.toggle('active', pane === 'stats');
        card.querySelectorAll('.pane').forEach(p => p.classList.toggle('active', p.dataset.pane === pane));
      }, true);
    });
  }
  const scrim = byId('scrim'); const drawerLeft = byId('drawerLeft'); const drawerRight = byId('drawerRight'); const drawerAuth = byId('drawerAuth');
  const iconSearch = byId('iconSearch'); const iconFilter = byId('iconFilter'); const iconReset = byId('iconReset'); const iconProfile = byId('iconProfile');
  let lastFocus = null;
  function setActiveIcon(btn, a) { btn?.classList.toggle('active', !!a); }
  function openLeft() { closeRight(false); closeAuth(false); lastFocus = document.activeElement; drawerLeft.classList.add('open'); scrim.classList.add('open'); document.body.classList.add('no-scroll'); setActiveIcon(iconSearch, true); setActiveIcon(iconFilter, false); setActiveIcon(iconProfile, false); }
  function closeLeft(focus = true) { drawerLeft.classList.remove('open'); if (!drawerRight.classList.contains('open') && !drawerAuth.classList.contains('open')) { scrim.classList.remove('open'); document.body.classList.remove('no-scroll'); } setActiveIcon(iconSearch, false); if (focus) lastFocus?.focus?.(); }
  function openRight() { closeLeft(false); closeAuth(false); lastFocus = document.activeElement; drawerRight.classList.add('open'); scrim.classList.add('open'); document.body.classList.add('no-scroll'); setActiveIcon(iconFilter, true); setActiveIcon(iconSearch, false); setActiveIcon(iconProfile, false); }
  function closeRight(focus = true) { drawerRight.classList.remove('open'); if (!drawerLeft.classList.contains('open') && !drawerAuth.classList.contains('open')) { scrim.classList.remove('open'); document.body.classList.remove('no-scroll'); } setActiveIcon(iconFilter, false); if (focus) lastFocus?.focus?.(); }
  function openAuth() { closeLeft(false); closeRight(false); lastFocus = document.activeElement; drawerAuth.classList.add('open'); scrim.classList.add('open'); document.body.classList.add('no-scroll'); setActiveIcon(iconProfile, true); setActiveIcon(iconSearch, false); setActiveIcon(iconFilter, false); }
  function closeAuth(focus = true) { drawerAuth.classList.remove('open'); if (!drawerLeft.classList.contains('open') && !drawerRight.classList.contains('open')) { scrim.classList.remove('open'); document.body.classList.remove('no-scroll'); } setActiveIcon(iconProfile, false); if (focus) lastFocus?.focus?.(); }
  function closeDrawers() { closeLeft(false); closeRight(false); closeAuth(); }
  byId('openLeft').addEventListener('click', openLeft); byId('closeLeft').addEventListener('click', () => closeLeft()); byId('closeRight').addEventListener('click', () => closeRight());
  byId('closeAuth').addEventListener('click', () => closeAuth()); iconSearch.addEventListener('click', openLeft); iconFilter.addEventListener('click', openRight); iconProfile.addEventListener('click', openAuth);
  iconReset.addEventListener('click', resetAll); scrim.addEventListener('click', closeDrawers);
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawers(); });
  function addSwipeClose(el, dir) { let sx = null, sy = null; el.addEventListener('touchstart', e => { sx = e.touches[0].clientX; sy = e.touches[0].clientY; }, { passive: true }); el.addEventListener('touchend', e => { if (sx == null) return; const dx = e.changedTouches[0].clientX - sx; const dy = e.changedTouches[0].clientY - sy; if (Math.abs(dx) > 40 && Math.abs(dx) > Math.abs(dy)) { if (dir === 'left' && dx < 0) closeLeft(); if (dir === 'right' && dx > 0) { el === drawerAuth ? closeAuth() : closeRight(); } } sx = sy = null; }); }
  addSwipeClose(drawerLeft, 'left'); addSwipeClose(drawerRight, 'right'); addSwipeClose(drawerAuth, 'right');
  const localSearch = byId('localSearch'); const localResults = byId('localResults');
  function renderLocalResults(q) { localResults.innerHTML = ''; if (!q) return; players.filter(p => (p.name || '').toLowerCase().includes(q.toLowerCase())).slice(0, 50).forEach(p => { const li = document.createElement('li'); const yr = p.graduatingClass ? ` (Class of ${p.graduatingClass})` : ''; li.textContent = `${p.name}${yr}`; li.addEventListener('click', () => { window.location.href = `profile.html?id=${encodeURIComponent(p.id)}`; closeLeft(); }); localResults.appendChild(li); }); }
  localSearch.addEventListener('input', (e) => renderLocalResults(e.target.value));
  byId('filterName').addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); applyFilters(); closeRight(); } });

  // --- INITIALIZE APP ---
  const loadingIndicator = byId('loadingIndicator');
  populateFilters();
  render(players);
  loadingIndicator.style.opacity = '0';
  setTimeout(() => loadingIndicator.style.display = 'none', 300);

});
</script>

</body>
</html>
