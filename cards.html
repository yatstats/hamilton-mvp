<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cards</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
  <?php include 'header.html'; ?>

  <main id="cardsGrid" class="cards-grid"></main>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    Papa.parse("https://docs.google.com/spreadsheets/d/e/2PACX-1vSB4q8nvjYfftVeWKkFNz42uDDWSuDXikimMa-a25WQk_XX-imZbiUd8q5Cj94rjZJjaabw5DGMvJFd/pub?gid=82179728&single=true&output=csv", {
      download: true,
      header: true,
      complete: function(results) {
        const players = results.data.filter(r => r.tbc_id);
        const grid = document.getElementById("cardsGrid");
        grid.innerHTML = players.map(p => `
          <div class="card">
            <img src="${p.front_img}" alt="${p.display_name}">
            <div class="bottom-grad"></div>
            <div class="front-left">
              <div class="name">${p.display_name}</div>
              <div class="team">${p.team}</div>
              <div class="parent">${p.level}</div>
            </div>
            <div class="front-right">
              <span class="chip">${p.status}</span>
            </div>
          </div>
        `).join("");
      }
    });
  });
  </script>
</body>
</html>